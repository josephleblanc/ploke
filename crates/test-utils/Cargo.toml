[package]
name = "ploke-test-utils"
version = "0.1.0"
edition = "2021"

[dependencies]
ploke-common = { path = "../common" }
# Make syn_parser optional, base dependency doesn't enable features
syn_parser = { path = "../ingest/syn_parser", optional = true }
# Core types needed only when uuid_ids is active
ploke-core = { path = "../ploke-core", optional = true } # Needed for Uuid types if test-utils uses them directly
uuid = { workspace = true, features = ["v5", "serde"], optional = true }
serde = { workspace = true, features = ["derive"], optional = true }
proc-macro2 = { workspace = true, features = [
    "span-locations",
], optional = true }

[features]
default = []
# Feature flag for the UUID refactor in test-utils
uuid_ids = [
    "dep:syn_parser",
    "syn_parser/uuid_ids", # <-- Propagate the feature flag
    "dep:ploke-core",      # Enable ploke-core dependency
    "ploke-core/uuid_ids", # Enable uuid_ids feature in ploke-core
    "dep:uuid",
    "dep:serde",
    "dep:proc-macro2",
]
