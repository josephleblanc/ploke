  2025-09-02T10:05:58.275126Z DEBUG ploke_tui::event_bus: event_priority: Realtime
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b, content: "Please get the metadata for the file 'Cargo.toml' using the get_file_metadata tool.", kind: User
    in ploke_tui::app_state::dispatcher::processing with cmd: AddUserMessage

  2025-09-02T10:05:58.275192Z  INFO ploke_tui::event_bus: close, time.busy: 66.6µs, time.idle: 2.81µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b, content: "Please get the metadata for the file 'Cargo.toml' using the get_file_metadata tool.", kind: User
    in ploke_tui::app_state::dispatcher::processing with cmd: AddUserMessage

  2025-09-02T10:05:58.275213Z  INFO ploke_tui::app_state::handlers::chat: sending llm_request wrapped in an AppEvent::Llm of kind user with ids 
                new_msg_id (not sent): 8d952888-a612-4982-85a6-e6cafc9a7d3b,
                parent_id: af4351fa-1347-4ea9-b611-650a3b2f6eaf
                message_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b,
    at crates/ploke-tui/src/app_state/handlers/chat.rs:185 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b, content: "Please get the metadata for the file 'Cargo.toml' using the get_file_metadata tool.", kind: User
    in ploke_tui::app_state::dispatcher::processing with cmd: AddUserMessage

  2025-09-02T10:05:58.275220Z DEBUG ploke_tui::event_bus: event_priority: Background
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b, content: "Please get the metadata for the file 'Cargo.toml' using the get_file_metadata tool.", kind: User
    in ploke_tui::app_state::dispatcher::processing with cmd: AddUserMessage

  2025-09-02T10:05:58.275226Z  INFO ploke_tui::event_bus: close, time.busy: 5.24µs, time.idle: 1.45µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b, content: "Please get the metadata for the file 'Cargo.toml' using the get_file_metadata tool.", kind: User
    in ploke_tui::app_state::dispatcher::processing with cmd: AddUserMessage

  2025-09-02T10:05:58.275233Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 130µs, time.idle: 4.04µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b, content: "Please get the metadata for the file 'Cargo.toml' using the get_file_metadata tool.", kind: User
    in ploke_tui::app_state::dispatcher::processing with cmd: AddUserMessage

  2025-09-02T10:05:58.275241Z DEBUG ploke_tui::app_state::dispatcher: close, time.busy: 163µs, time.idle: 12.9µs
    at crates/ploke-tui/src/app_state/dispatcher.rs:34 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: AddUserMessage

  2025-09-02T10:05:58.275256Z  INFO ploke_tui::app_state::database: scan_for_change in crate_name: fixture_nodes
    at crates/ploke-tui/src/app_state/database.rs:276 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: ScanForChange

  2025-09-02T10:05:58.277468Z  INFO ploke_tui::app_state::database: file_data: [
    FileData {
        id: d68bf001-e754-500d-b14d-68bbd08c720b,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            dd256356-df42-54dd-b057-14c920fd4d37,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/lib.rs",
    },
    FileData {
        id: b2a32910-7045-5247-a240-db2af6b54485,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            ac93e2c5-1ab4-5ff6-93f5-bbf673647324,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/imports.rs",
    },
    FileData {
        id: b6de9492-7bdb-535f-9eab-4be8213ffaa7,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            c9e5b5bf-d784-5773-822c-19d291dadb15,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/enums.rs",
    },
    FileData {
        id: 98cf843e-a79d-53ad-b63e-edbb06f55dbf,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            4203f6af-f226-5586-8770-4bd1fd1aca0d,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/structs.rs",
    },
    FileData {
        id: 06da6227-0818-5518-a993-a6f5f97a8767,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            40ea1595-d05d-5820-b4b1-cb665f5a1f46,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/unions.rs",
    },
    FileData {
        id: 78d3361f-0a2b-55d1-a35e-1ae57b02bf06,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            8764de16-cce8-5344-a268-d86abe5598d9,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/const_static.rs",
    },
    FileData {
        id: 24c3c750-21b0-5633-905c-b67b10176426,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            b1835274-d0e4-5951-891a-5071e4680f02,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/traits.rs",
    },
    FileData {
        id: 2bc98b2f-8ac7-5650-ae38-c9b24c179319,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            c663eeb6-e897-5ec9-9013-6f3d244de65b,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/impls.rs",
    },
    FileData {
        id: 94817678-df0e-59fa-8a65-8a7f6a0267a0,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            f1eac66e-d822-57a0-8774-390cd4b049a3,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/type_alias.rs",
    },
    FileData {
        id: 29940c0b-7fe9-5ea0-83c3-4a4bc1b7ee4a,
        namespace: bfc25988-15c1-5e58-9aa8-3d33b5e58b92,
        file_tracking_hash: TrackingHash(
            7e370317-0e37-5bcb-a7ac-3bc37e2f2e22,
        ),
        file_path: "/home/brasides/code/openai-codex/ploke/tests/fixture_crates/fixture_nodes/src/macros.rs",
    },
]
    at crates/ploke-tui/src/app_state/database.rs:279 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: ScanForChange

  2025-09-02T10:05:58.284247Z  INFO ploke_tui::llm: Received LLM request for parent_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b
new_msg_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b
    at crates/ploke-tui/src/llm/mod.rs:304 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: ScanForChange

  2025-09-02T10:05:58.287661Z DEBUG ploke_tui::app: display_model: kimi-k2
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/app/mod.rs:509 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: ScanForChange

  2025-09-02T10:05:58.288204Z DEBUG ploke_tui::app: display_model: kimi-k2
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/app/mod.rs:509 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: ScanForChange

  2025-09-02T10:05:58.288514Z  INFO ploke_tui::app_state::database: No file changes detected
    at crates/ploke-tui/src/app_state/database.rs:292 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: ScanForChange

  2025-09-02T10:05:58.288530Z DEBUG ploke_tui::app_state::dispatcher: close, time.busy: 13.3ms, time.idle: 2.68µs
    at crates/ploke-tui/src/app_state/dispatcher.rs:34 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: ScanForChange

  2025-09-02T10:05:58.289056Z  INFO ploke_embed::local: Processing outputs with self.model.forward
    at crates/ingest/ploke-embed/src/local/mod.rs:411 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.462487Z DEBUG ploke_embed::local: shapes: outputs=[1, 24, 384], weights=[1, 24, 384], sum_embeddings=[1, 1, 384]
    at crates/ingest/ploke-embed/src/local/mod.rs:428 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.463288Z DEBUG ploke_embed::local: shapes: outputs=[1, 24, 384], weights=[1, 24, 384], norms=[1, 1, 1]
    at crates/ingest/ploke-embed/src/local/mod.rs:444 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.463329Z DEBUG ploke_embed::local: close, time.busy: 175ms, time.idle: 2.98µs
    at crates/ingest/ploke-embed/src/local/mod.rs:380 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.653820Z DEBUG ploke_rag::core: Dense search collected 82 results across 10 node types
    at crates/ploke-rag/src/core/mod.rs:537 on ThreadId(2)
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.653876Z DEBUG ploke_rag::core: Dense search returning 15 results
    at crates/ploke-rag/src/core/mod.rs:547 on ThreadId(2)
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.653898Z  INFO ploke_rag::core: close, time.busy: 365ms, time.idle: 6.41µs
    at crates/ploke-rag/src/core/mod.rs:486 on ThreadId(2)
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.653969Z  INFO ploke_rag::core: close, time.busy: 31.5µs, time.idle: 365ms
    at crates/ploke-rag/src/core/mod.rs:342 on ThreadId(2)
    in ploke_rag::core::bm25_status with timeout_ms: 250
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.654072Z DEBUG ploke_rag::core: BM25 empty; retrying after backoff, attempts: 1, bm25_results: 0, bm25_status: Some(Uninitialized), backoff_ms: 50
    at crates/ploke-rag/src/core/mod.rs:303 on ThreadId(2)
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.705337Z  INFO ploke_rag::core: close, time.busy: 28.9µs, time.idle: 24.1µs
    at crates/ploke-rag/src/core/mod.rs:342 on ThreadId(2)
    in ploke_rag::core::bm25_status with timeout_ms: 250
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.705466Z DEBUG ploke_rag::core: BM25 empty; retrying after backoff, attempts: 2, bm25_results: 0, bm25_status: Some(Uninitialized), backoff_ms: 100
    at crates/ploke-rag/src/core/mod.rs:303 on ThreadId(2)
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.806987Z  INFO ploke_rag::core: close, time.busy: 60.6µs, time.idle: 45.0µs
    at crates/ploke-rag/src/core/mod.rs:342 on ThreadId(2)
    in ploke_rag::core::bm25_status with timeout_ms: 250
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.807196Z DEBUG ploke_rag::core: BM25 not ready/empty; falling back to dense search, bm25_results: 0, bm25_status: Some(Uninitialized), attempts: 3, fallback_used: true
    at crates/ploke-rag/src/core/mod.rs:312 on ThreadId(2)
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.807692Z  INFO ploke_embed::local: Processing outputs with self.model.forward
    at crates/ingest/ploke-embed/src/local/mod.rs:411 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.978507Z DEBUG ploke_embed::local: shapes: outputs=[1, 24, 384], weights=[1, 24, 384], sum_embeddings=[1, 1, 384]
    at crates/ingest/ploke-embed/src/local/mod.rs:428 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.979282Z DEBUG ploke_embed::local: shapes: outputs=[1, 24, 384], weights=[1, 24, 384], norms=[1, 1, 1]
    at crates/ingest/ploke-embed/src/local/mod.rs:444 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:58.979313Z DEBUG ploke_embed::local: close, time.busy: 172ms, time.idle: 3.33µs
    at crates/ingest/ploke-embed/src/local/mod.rs:380 on ThreadId(2)
    in ploke_embed::local::process_batch
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.169498Z DEBUG ploke_rag::core: Dense search collected 82 results across 10 node types
    at crates/ploke-rag/src/core/mod.rs:537 on ThreadId(2)
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.169544Z DEBUG ploke_rag::core: Dense search returning 15 results
    at crates/ploke-rag/src/core/mod.rs:547 on ThreadId(2)
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.169564Z  INFO ploke_rag::core: close, time.busy: 362ms, time.idle: 6.09µs
    at crates/ploke-rag/src/core/mod.rs:486 on ThreadId(2)
    in ploke_rag::core::search with query_len: 83, top_k: 15
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.169582Z DEBUG ploke_rag::core: Dense fallback complete, dense_results: 15
    at crates/ploke-rag/src/core/mod.rs:321 on ThreadId(2)
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.169592Z  INFO ploke_rag::core: close, time.busy: 363ms, time.idle: 518ms
    at crates/ploke-rag/src/core/mod.rs:231 on ThreadId(2)
    in ploke_rag::core::search_bm25 with query_len: 83, top_k: 15, strict: false, timeout_ms: 250
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202775Z  INFO ploke_rag::context: close, time.busy: 29.1ms, time.idle: 4.08ms
    at crates/ploke-rag/src/context/mod.rs:153 on ThreadId(2)
    in ploke_rag::context::assemble_context with query_len: 83, hits: 15
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202807Z  INFO ploke_rag::core: close, time.busy: 757ms, time.idle: 157ms
    at crates/ploke-rag/src/core/mod.rs:553 on ThreadId(2)
    in ploke_rag::core::get_context with query_len: 83, top_k: 15
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202820Z  INFO ploke_tui::rag::context: constructing context (RAG) with 15 parts and 2 messages
    at crates/ploke-tui/src/rag/context.rs:118 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202834Z DEBUG ploke_tui::rag::context: m.content.is_empty() = false
    at crates/ploke-tui/src/rag/context.rs:137 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202854Z DEBUG ploke_tui::event_bus: event_priority: Background
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202868Z  INFO ploke_tui::event_bus: close, time.busy: 14.6µs, time.idle: 2.07µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202880Z DEBUG ploke_tui::app_state::dispatcher: close, time.busy: 914ms, time.idle: 4.24µs
    at crates/ploke-tui/src/app_state/dispatcher.rs:34 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: EmbedMessage

  2025-09-02T10:05:59.202903Z  INFO ploke_tui::llm: Received context for parent_id: 8d952888-a612-4982-85a6-e6cafc9a7d3b
    at crates/ploke-tui/src/llm/mod.rs:315 on ThreadId(2)

  2025-09-02T10:05:59.202918Z  INFO ploke_tui::llm: pending_requests found match for req_parent: 8d952888-a612-4982-85a6-e6cafc9a7d3b
    at crates/ploke-tui/src/llm/mod.rs:338 on ThreadId(2)

  2025-09-02T10:05:59.202923Z  INFO ploke_tui::llm: ready_contexts found match for req_parent: 8d952888-a612-4982-85a6-e6cafc9a7d3b
    at crates/ploke-tui/src/llm/mod.rs:343 on ThreadId(2)

  2025-09-02T10:05:59.202940Z  INFO ploke_tui::llm: removing id from pending_requests
    at crates/ploke-tui/src/llm/mod.rs:361 on ThreadId(2)

  2025-09-02T10:05:59.202987Z DEBUG ploke_tui::event_bus: event_priority: Realtime
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::dispatcher::processing with cmd: CreateAssistantMessage

  2025-09-02T10:05:59.202995Z  INFO ploke_tui::event_bus: close, time.busy: 6.92µs, time.idle: 1.41µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::dispatcher::processing with cmd: CreateAssistantMessage

  2025-09-02T10:05:59.203001Z DEBUG ploke_tui::app_state::dispatcher: close, time.busy: 26.5µs, time.idle: 1.22µs
    at crates/ploke-tui/src/app_state/dispatcher.rs:34 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: CreateAssistantMessage

  2025-09-02T10:05:59.203020Z  INFO ploke_tui::llm: prepare_and_run_llm_call start, model: moonshotai/kimi-k2, has_context: true
    at crates/ploke-tui/src/llm/mod.rs:654 on ThreadId(2)
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.203046Z DEBUG ploke_tui::llm: llm_request_plan, model: moonshotai/kimi-k2, base_url: https://openrouter.ai/api/v1, provider_type: OpenRouter, provider_slug: None, supports_tools_cache: Some(true), require_tool_support: false
    at crates/ploke-tui/src/llm/mod.rs:730 on ThreadId(2)
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.203089Z DEBUG ploke_tui::llm: llm_request_tools:
	use_tools: true
	tool_names: request_code_context,apply_code_edit,get_file_metadata
    at crates/ploke-tui/src/llm/mod.rs:772 on ThreadId(2)
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.203133Z DEBUG ploke_tui::llm::session: Starting RequestSession::run, self.params: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }
    at crates/ploke-tui/src/llm/session.rs:45 on ThreadId(2)
    in ploke_tui::llm::session::request_session_run with model: moonshotai/kimi-k2
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.203153Z DEBUG ploke_tui::llm::session: build_comp_req, model: moonshotai/kimi-k2, use_tools: true, messages: 18
    at crates/ploke-tui/src/llm/session.rs:338 on ThreadId(2)
    in ploke_tui::llm::session::request_session_run with model: moonshotai/kimi-k2
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.203163Z DEBUG ploke_tui::llm::session: dispatch_request, model: moonshotai/kimi-k2, base_url: https://openrouter.ai/api/v1, full_url: https://openrouter.ai/api/v1/chat/completions, provider_slug: None, use_tools: true, tools: request_code_context,apply_code_edit,get_file_metadata
    at crates/ploke-tui/src/llm/session.rs:85 on ThreadId(2)
    in ploke_tui::llm::session::request_session_run with model: moonshotai/kimi-k2
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.203379Z DEBUG reqwest::connect: starting new connection: https://openrouter.ai/
    at /home/brasides/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/reqwest-0.12.15/src/connect.rs:625 on ThreadId(2)
    in ploke_tui::llm::session::request_session_run with model: moonshotai/kimi-k2
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.203809Z DEBUG ploke_tui::app: display_model: kimi-k2
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/app/mod.rs:509 on ThreadId(2)
    in ploke_tui::llm::session::request_session_run with model: moonshotai/kimi-k2
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.245236Z DEBUG hyper_util::client::legacy::connect::dns: close, time.busy: 41.7ms, time.idle: 84.7µs
    at /home/brasides/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/hyper-util-0.1.10/src/client/legacy/connect/dns.rs:121 on ThreadId(31)
    in hyper_util::client::legacy::connect::dns::resolve with host: openrouter.ai
    in ploke_tui::llm::session::request_session_run with model: moonshotai/kimi-k2
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.245365Z DEBUG hyper_util::client::legacy::connect::http: connecting to 104.18.3.115:443
    at /home/brasides/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/hyper-util-0.1.10/src/client/legacy/connect/http.rs:657 on ThreadId(2)
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:05:59.266707Z DEBUG hyper_util::client::legacy::connect::http: connected to 104.18.3.115:443
    at /home/brasides/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/hyper-util-0.1.10/src/client/legacy/connect/http.rs:660 on ThreadId(2)
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:06:00.721460Z DEBUG ploke_tui::llm::session: raw body: 
         

         
{"id":"gen-1756807559-xeqarzKitT1fdhPQvbxY","provider":"Nebius","model":"moonshotai/kimi-k2","object":"chat.completion","created":1756807559,"choices":[{"logprobs":null,"finish_reason":"tool_calls","native_finish_reason":"tool_calls","index":0,"message":{"role":"assistant","content":"I'll get the metadata for the Cargo.toml file as requested.","refusal":null,"reasoning":null,"tool_calls":[{"index":0,"id":"functions.get_file_metadata:0","function":{"name":"get_file_metadata","arguments":"{\"file_path\": \"Cargo.toml\"}"},"type":"function"}]}}],"usage":{"prompt_tokens":1621,"completion_tokens":32,"total_tokens":1653}}
    at crates/ploke-tui/src/llm/session.rs:134 on ThreadId(2)
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:06:00.721631Z  INFO ploke_tui::llm::session: close, time.busy: 1.52s, time.idle: 3.08µs
    at crates/ploke-tui/src/llm/session.rs:43 on ThreadId(2)
    in ploke_tui::llm::session::request_session_run with model: moonshotai/kimi-k2
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:06:00.721741Z DEBUG hyper_util::client::legacy::pool: pooling idle connection for ("https", openrouter.ai)
    at /home/brasides/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/hyper-util-0.1.10/src/client/legacy/pool.rs:396 on ThreadId(2)

  2025-09-02T10:06:00.721887Z  INFO ploke_tui::llm: close, time.busy: 2.69ms, time.idle: 1.52s
    at crates/ploke-tui/src/llm/mod.rs:641 on ThreadId(2)
    in ploke_tui::llm::prepare_and_run_llm_call with provider_params: Some(LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) })
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:06:00.721930Z  INFO ploke_tui::llm: close, time.busy: 2.79ms, time.idle: 1.52s
    at crates/ploke-tui/src/llm/mod.rs:503 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with model: moonshotai/kimi-k2

  2025-09-02T10:06:00.722023Z DEBUG ploke_tui::event_bus: event_priority: Realtime
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: fa8cdd60-db31-4a2d-b44d-52a676df9f86, content: "LLM request failed: Failed to deserialize response data: UUID parsing failed: invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `g` at 1 at line 5 column 43 — body was: \n         \n\n         \n{\"id\":\"gen-1756807559-xeqarzKitT1fdhPQvbxY\",\"provider\":\"Nebius\",\"model\":\"moonshotai/kimi-k2\",\"object\":\"chat.completion\",\"created\":1756807559,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"tool_calls\",\"native_finish_reason\":\"tool_calls\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"I'll get the metadata for the Cargo.toml file as requested.\",\"refusal\":null,\"reasoning\":null,\"tool_calls\":[{\"index\":0,\"id\":\"functions.get_file_metadata:0\",\"function\":{\"name\":\"get_file_metadata\",\"arguments\":\"{\\\"file_path\\\": \\\"Cargo.toml\\\"}\"},\"type\":\"function\"}]}}],\"usage\":{\"prompt_tokens\":1621,\"completion_tokens\":32,\"total_tokens\":1653}}", kind: SysInfo
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.722043Z  INFO ploke_tui::event_bus: close, time.busy: 19.8µs, time.idle: 1.79µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: fa8cdd60-db31-4a2d-b44d-52a676df9f86, content: "LLM request failed: Failed to deserialize response data: UUID parsing failed: invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `g` at 1 at line 5 column 43 — body was: \n         \n\n         \n{\"id\":\"gen-1756807559-xeqarzKitT1fdhPQvbxY\",\"provider\":\"Nebius\",\"model\":\"moonshotai/kimi-k2\",\"object\":\"chat.completion\",\"created\":1756807559,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"tool_calls\",\"native_finish_reason\":\"tool_calls\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"I'll get the metadata for the Cargo.toml file as requested.\",\"refusal\":null,\"reasoning\":null,\"tool_calls\":[{\"index\":0,\"id\":\"functions.get_file_metadata:0\",\"function\":{\"name\":\"get_file_metadata\",\"arguments\":\"{\\\"file_path\\\": \\\"Cargo.toml\\\"}\"},\"type\":\"function\"}]}}],\"usage\":{\"prompt_tokens\":1621,\"completion_tokens\":32,\"total_tokens\":1653}}", kind: SysInfo
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.722053Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 54.8µs, time.idle: 3.53µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: fa8cdd60-db31-4a2d-b44d-52a676df9f86, content: "LLM request failed: Failed to deserialize response data: UUID parsing failed: invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `g` at 1 at line 5 column 43 — body was: \n         \n\n         \n{\"id\":\"gen-1756807559-xeqarzKitT1fdhPQvbxY\",\"provider\":\"Nebius\",\"model\":\"moonshotai/kimi-k2\",\"object\":\"chat.completion\",\"created\":1756807559,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"tool_calls\",\"native_finish_reason\":\"tool_calls\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"I'll get the metadata for the Cargo.toml file as requested.\",\"refusal\":null,\"reasoning\":null,\"tool_calls\":[{\"index\":0,\"id\":\"functions.get_file_metadata:0\",\"function\":{\"name\":\"get_file_metadata\",\"arguments\":\"{\\\"file_path\\\": \\\"Cargo.toml\\\"}\"},\"type\":\"function\"}]}}],\"usage\":{\"prompt_tokens\":1621,\"completion_tokens\":32,\"total_tokens\":1653}}", kind: SysInfo
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.722060Z DEBUG ploke_tui::app_state::dispatcher: close, time.busy: 83.5µs, time.idle: 2.52µs
    at crates/ploke-tui/src/app_state/dispatcher.rs:34 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.722080Z  INFO ploke_tui::app_state::handlers::chat: Updating message ecf42e89-8c78-4edf-8970-2c337e891942 status=Some(Completed) content_preview=Request failed: Failed to deserialize response data: UUID parsing failed: invalid character: expecte...
    at crates/ploke-tui/src/app_state/handlers/chat.rs:24 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::update_message with id: ecf42e89-8c78-4edf-8970-2c337e891942, msg_id: ecf42e89-8c78-4edf-8970-2c337e891942, new_status: Some(Completed)
    in ploke_tui::app_state::dispatcher::processing with cmd: UpdateMessage

  2025-09-02T10:06:00.722089Z  INFO ploke_tui::app_state::handlers::chat: Message updated successfully; dispatching MessageUpdatedEvent, msg_id: ecf42e89-8c78-4edf-8970-2c337e891942, kind: Assistant, old_status: Generating, new_status: Completed
    at crates/ploke-tui/src/app_state/handlers/chat.rs:42 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::update_message with id: ecf42e89-8c78-4edf-8970-2c337e891942, msg_id: ecf42e89-8c78-4edf-8970-2c337e891942, new_status: Some(Completed)
    in ploke_tui::app_state::dispatcher::processing with cmd: UpdateMessage

  2025-09-02T10:06:00.722097Z DEBUG ploke_tui::event_bus: event_priority: Realtime
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::update_message with id: ecf42e89-8c78-4edf-8970-2c337e891942, msg_id: ecf42e89-8c78-4edf-8970-2c337e891942, new_status: Some(Completed)
    in ploke_tui::app_state::dispatcher::processing with cmd: UpdateMessage

  2025-09-02T10:06:00.722104Z  INFO ploke_tui::event_bus: close, time.busy: 6.42µs, time.idle: 1.65µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::update_message with id: ecf42e89-8c78-4edf-8970-2c337e891942, msg_id: ecf42e89-8c78-4edf-8970-2c337e891942, new_status: Some(Completed)
    in ploke_tui::app_state::dispatcher::processing with cmd: UpdateMessage

  2025-09-02T10:06:00.722113Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 35.1µs, time.idle: 3.14µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:17 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::update_message with id: ecf42e89-8c78-4edf-8970-2c337e891942, msg_id: ecf42e89-8c78-4edf-8970-2c337e891942, new_status: Some(Completed)
    in ploke_tui::app_state::dispatcher::processing with cmd: UpdateMessage

  2025-09-02T10:06:00.722120Z DEBUG ploke_tui::app_state::dispatcher: close, time.busy: 50.7µs, time.idle: 1.53µs
    at crates/ploke-tui/src/app_state/dispatcher.rs:34 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: UpdateMessage

  2025-09-02T10:06:00.722140Z DEBUG ploke_tui::event_bus: event_priority: Realtime
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: ab47875a-6b33-402b-94e4-9dabcefc41cf, content: "Request summary: error (Failed to deserialize response data: UUID parsing failed: invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `g` at 1 at line 5 column 43 — body was: \n         \n\n         \n{\"id\":\"gen-1756807559-xeqarzKitT1fdhPQvbxY\",\"provider\":\"Nebius\",\"model\":\"moonshotai/kimi-k2\",\"object\":\"chat.completion\",\"created\":1756807559,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"tool_calls\",\"native_finish_reason\":\"tool_calls\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"I'll get the metadata for the Cargo.toml file as requested.\",\"refusal\":null,\"reasoning\":null,\"tool_calls\":[{\"index\":0,\"id\":\"functions.get_file_metadata:0\",\"function\":{\"name\":\"get_file_metadata\",\"arguments\":\"{\\\"file_path\\\": \\\"Cargo.toml\\\"}\"},\"type\":\"function\"}]}}],\"usage\":{\"prompt_tokens\":1621,\"completion_tokens\":32,\"total_tokens\":1653}})", kind: SysInfo
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.722148Z  INFO ploke_tui::event_bus: close, time.busy: 7.08µs, time.idle: 1.56µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: ab47875a-6b33-402b-94e4-9dabcefc41cf, content: "Request summary: error (Failed to deserialize response data: UUID parsing failed: invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `g` at 1 at line 5 column 43 — body was: \n         \n\n         \n{\"id\":\"gen-1756807559-xeqarzKitT1fdhPQvbxY\",\"provider\":\"Nebius\",\"model\":\"moonshotai/kimi-k2\",\"object\":\"chat.completion\",\"created\":1756807559,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"tool_calls\",\"native_finish_reason\":\"tool_calls\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"I'll get the metadata for the Cargo.toml file as requested.\",\"refusal\":null,\"reasoning\":null,\"tool_calls\":[{\"index\":0,\"id\":\"functions.get_file_metadata:0\",\"function\":{\"name\":\"get_file_metadata\",\"arguments\":\"{\\\"file_path\\\": \\\"Cargo.toml\\\"}\"},\"type\":\"function\"}]}}],\"usage\":{\"prompt_tokens\":1621,\"completion_tokens\":32,\"total_tokens\":1653}})", kind: SysInfo
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.722157Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 20.8µs, time.idle: 2.31µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: ab47875a-6b33-402b-94e4-9dabcefc41cf, content: "Request summary: error (Failed to deserialize response data: UUID parsing failed: invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `g` at 1 at line 5 column 43 — body was: \n         \n\n         \n{\"id\":\"gen-1756807559-xeqarzKitT1fdhPQvbxY\",\"provider\":\"Nebius\",\"model\":\"moonshotai/kimi-k2\",\"object\":\"chat.completion\",\"created\":1756807559,\"choices\":[{\"logprobs\":null,\"finish_reason\":\"tool_calls\",\"native_finish_reason\":\"tool_calls\",\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"I'll get the metadata for the Cargo.toml file as requested.\",\"refusal\":null,\"reasoning\":null,\"tool_calls\":[{\"index\":0,\"id\":\"functions.get_file_metadata:0\",\"function\":{\"name\":\"get_file_metadata\",\"arguments\":\"{\\\"file_path\\\": \\\"Cargo.toml\\\"}\"},\"type\":\"function\"}]}}],\"usage\":{\"prompt_tokens\":1621,\"completion_tokens\":32,\"total_tokens\":1653}})", kind: SysInfo
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.722164Z DEBUG ploke_tui::app_state::dispatcher: close, time.busy: 37.1µs, time.idle: 1.57µs
    at crates/ploke-tui/src/app_state/dispatcher.rs:34 on ThreadId(2)
    in ploke_tui::app_state::dispatcher::processing with cmd: AddMessageImmediate

  2025-09-02T10:06:00.723654Z DEBUG ploke_tui::app: display_model: kimi-k2
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/app/mod.rs:509 on ThreadId(2)

  2025-09-02T10:06:00.725376Z DEBUG ploke_tui::app: display_model: kimi-k2
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/app/mod.rs:509 on ThreadId(2)

  2025-09-02T10:06:00.727007Z DEBUG ploke_tui::app: display_model: kimi-k2
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/app/mod.rs:509 on ThreadId(2)

  2025-09-02T10:06:13.277909Z DEBUG ploke_tui::event_bus: event_priority: Realtime
    at crates/ploke-tui/src/event_bus/mod.rs:198 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-09-02T10:06:13.278020Z  INFO ploke_tui::event_bus: close, time.busy: 119µs, time.idle: 18.7µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

