  2025-08-28T01:06:01.399417Z  INFO ploke_rag::core: close, time.busy: 28.2µs, time.idle: 23.6µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:06:01.399550Z  WARN ploke_tui::user_config: OPENROUTER_API_KEY not set and no OpenRouter provider configured; skipping model registry refresh
    at crates/ploke-tui/src/user_config.rs:494 on ThreadId(2)

  2025-08-28T01:07:15.083480Z  INFO ploke_rag::core: close, time.busy: 32.9µs, time.idle: 24.5µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:11:38.923094Z  INFO ploke_rag::core: close, time.busy: 33.2µs, time.idle: 21.6µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:13:04.310320Z  INFO ploke_rag::core: close, time.busy: 33.5µs, time.idle: 23.5µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:24:46.557276Z  INFO ploke_rag::core: close, time.busy: 32.7µs, time.idle: 22.6µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:24:47.660393Z  INFO e2e_openrouter_tools_app: models/user returned 320 entries
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:374 on ThreadId(2)

  2025-08-28T01:24:47.828167Z  INFO e2e_openrouter_tools_app: Full response infodump:
Object {
    "data": Array [
        Object {
            "name": String("Z.AI"),
            "privacy_policy_url": Null,
            "slug": String("z-ai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("SambaNova"),
            "privacy_policy_url": String("https://sambanova.ai/privacy-policy"),
            "slug": String("sambanova"),
            "status_page_url": String("https://status.sambanova.ai/"),
            "terms_of_service_url": String("https://sambanova.ai/terms-and-conditions"),
        },
        Object {
            "name": String("Kluster"),
            "privacy_policy_url": String("https://www.kluster.ai/privacy-policy"),
            "slug": String("klusterai"),
            "status_page_url": String("https://status.klusterai.dev/"),
            "terms_of_service_url": String("https://www.kluster.ai/terms-of-use"),
        },
        Object {
            "name": String("Together"),
            "privacy_policy_url": String("https://www.together.ai/privacy"),
            "slug": String("together"),
            "status_page_url": String("https://status.together.ai/"),
            "terms_of_service_url": String("https://www.together.ai/terms-of-service"),
        },
        Object {
            "name": String("Cerebras"),
            "privacy_policy_url": String("https://www.cerebras.ai/privacy-policy"),
            "slug": String("cerebras"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.cerebras.ai/terms-of-service"),
        },
        Object {
            "name": String("Venice"),
            "privacy_policy_url": String("https://venice.ai/legal/privacy-policy"),
            "slug": String("venice"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://venice.ai/legal/tos"),
        },
        Object {
            "name": String("Morph"),
            "privacy_policy_url": String("https://morphllm.com/privacy"),
            "slug": String("morph"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Moonshot AI"),
            "privacy_policy_url": String("https://platform.moonshot.ai/docs/agreement/userprivacy"),
            "slug": String("moonshotai"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://platform.moonshot.ai/docs/agreement/modeluse"),
        },
        Object {
            "name": String("OpenAI"),
            "privacy_policy_url": String("https://openai.com/policies/privacy-policy/"),
            "slug": String("openai"),
            "status_page_url": String("https://status.openai.com/"),
            "terms_of_service_url": String("https://openai.com/policies/row-terms-of-use/"),
        },
        Object {
            "name": String("Stealth"),
            "privacy_policy_url": Null,
            "slug": String("stealth"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("WandB"),
            "privacy_policy_url": Null,
            "slug": String("wandb"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("AtlasCloud"),
            "privacy_policy_url": String("https://www.atlascloud.ai/privacy"),
            "slug": String("atlas-cloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Amazon Bedrock"),
            "privacy_policy_url": String("https://aws.amazon.com/privacy"),
            "slug": String("amazon-bedrock"),
            "status_page_url": String("https://health.aws.amazon.com/health/status"),
            "terms_of_service_url": String("https://aws.amazon.com/service-terms/"),
        },
        Object {
            "name": String("Groq"),
            "privacy_policy_url": String("https://groq.com/privacy-policy/"),
            "slug": String("groq"),
            "status_page_url": String("https://status.groq.com/"),
            "terms_of_service_url": String("https://groq.com/terms-of-use/"),
        },
        Object {
            "name": String("Featherless"),
            "privacy_policy_url": String("https://featherless.ai/privacy"),
            "slug": String("featherless"),
            "status_page_url": String("https://featherless.ai/status"),
            "terms_of_service_url": String("https://featherless.ai/terms"),
        },
        Object {
            "name": String("NextBit"),
            "privacy_policy_url": String("https://www.nextbit256.com/docs/privacy-policy"),
            "slug": String("nextbit"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.nextbit256.com/docs/terms-of-service"),
        },
        Object {
            "name": String("Atoma"),
            "privacy_policy_url": Null,
            "slug": String("atoma"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://atoma.network/terms_of_service"),
        },
        Object {
            "name": String("BaseTen"),
            "privacy_policy_url": String("https://www.baseten.co/privacy-policy"),
            "slug": String("baseten"),
            "status_page_url": String("https://status.baseten.co/"),
            "terms_of_service_url": String("https://www.baseten.co/terms-and-conditions"),
        },
        Object {
            "name": String("AI21"),
            "privacy_policy_url": String("https://www.ai21.com/privacy-policy/"),
            "slug": String("ai21"),
            "status_page_url": String("https://status.ai21.com/"),
            "terms_of_service_url": String("https://www.ai21.com/terms-of-service/"),
        },
        Object {
            "name": String("Minimax"),
            "privacy_policy_url": String("https://www.minimax.io/platform/protocol/privacy-policy"),
            "slug": String("minimax"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.minimax.io/platform/protocol/terms-of-service"),
        },
        Object {
            "name": String("Mistral"),
            "privacy_policy_url": String("https://mistral.ai/terms/#privacy-policy"),
            "slug": String("mistral"),
            "status_page_url": String("https://status.mistral.ai/"),
            "terms_of_service_url": String("https://mistral.ai/terms/#terms-of-use"),
        },
        Object {
            "name": String("Anthropic"),
            "privacy_policy_url": String("https://www.anthropic.com/legal/privacy"),
            "slug": String("anthropic"),
            "status_page_url": String("https://status.anthropic.com/"),
            "terms_of_service_url": String("https://www.anthropic.com/legal/commercial-terms"),
        },
        Object {
            "name": String("Lambda"),
            "privacy_policy_url": String("https://lambda.ai/legal/privacy-policy"),
            "slug": String("lambda"),
            "status_page_url": String("https://status.lambdalabs.com/"),
            "terms_of_service_url": String("https://lambda.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("Hyperbolic"),
            "privacy_policy_url": String("https://hyperbolic.xyz/privacy"),
            "slug": String("hyperbolic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://hyperbolic.xyz/terms"),
        },
        Object {
            "name": String("NCompass"),
            "privacy_policy_url": String("https://ncompass.tech/privacy"),
            "slug": String("ncompass"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://ncompass.tech/terms"),
        },
        Object {
            "name": String("Azure"),
            "privacy_policy_url": String("https://www.microsoft.com/en-us/privacy/privacystatement"),
            "slug": String("azure"),
            "status_page_url": String("https://status.azure.com/"),
            "terms_of_service_url": String("https://www.microsoft.com/en-us/legal/terms-of-use?oneroute=true"),
        },
        Object {
            "name": String("DeepSeek"),
            "privacy_policy_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Privacy%20Policy.html"),
            "slug": String("deepseek"),
            "status_page_url": String("https://status.deepseek.com/"),
            "terms_of_service_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Terms%20of%20Use.html"),
        },
        Object {
            "name": String("Crusoe"),
            "privacy_policy_url": String("https://legal.crusoe.ai/open-router#cloud-privacy-policy"),
            "slug": String("crusoe"),
            "status_page_url": String("https://status.crusoecloud.com/"),
            "terms_of_service_url": String("https://legal.crusoe.ai/open-router#managed-inference-tos-open-router"),
        },
        Object {
            "name": String("Cohere"),
            "privacy_policy_url": String("https://cohere.com/privacy"),
            "slug": String("cohere"),
            "status_page_url": String("https://status.cohere.ai/"),
            "terms_of_service_url": String("https://cohere.com/terms-of-use"),
        },
        Object {
            "name": String("Google"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-vertex"),
            "status_page_url": String("https://status.cloud.google.com/products/sdXM79fz1FS6ekNpu37K/history"),
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Mancer 2"),
            "privacy_policy_url": String("https://mancer.tech/privacy"),
            "slug": String("mancer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://mancer.tech/terms"),
        },
        Object {
            "name": String("Perplexity"),
            "privacy_policy_url": String("https://www.perplexity.ai/hub/legal/privacy-policy"),
            "slug": String("perplexity"),
            "status_page_url": String("https://status.perplexity.ai/"),
            "terms_of_service_url": String("https://www.perplexity.ai/hub/legal/perplexity-api-terms-of-service"),
        },
        Object {
            "name": String("Avian"),
            "privacy_policy_url": String("https://avian.io/privacy"),
            "slug": String("avian"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://avian.io/terms"),
        },
        Object {
            "name": String("Novita"),
            "privacy_policy_url": String("https://novita.ai/legal/privacy-policy"),
            "slug": String("novita"),
            "status_page_url": String("https://status.novita.ai/"),
            "terms_of_service_url": String("https://novita.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("SiliconFlow"),
            "privacy_policy_url": Null,
            "slug": String("siliconflow"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Switchpoint"),
            "privacy_policy_url": Null,
            "slug": String("switchpoint"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Fireworks"),
            "privacy_policy_url": String("https://fireworks.ai/privacy-policy"),
            "slug": String("fireworks"),
            "status_page_url": String("https://status.fireworks.ai/"),
            "terms_of_service_url": String("https://fireworks.ai/terms-of-service"),
        },
        Object {
            "name": String("Inflection"),
            "privacy_policy_url": String("https://inflection.ai/privacy-policy"),
            "slug": String("inflection"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://developers.inflection.ai/tos"),
        },
        Object {
            "name": String("xAI"),
            "privacy_policy_url": String("https://x.ai/legal/privacy-policy"),
            "slug": String("xai"),
            "status_page_url": String("https://status.x.ai/"),
            "terms_of_service_url": String("https://x.ai/legal/terms-of-service-enterprise"),
        },
        Object {
            "name": String("Google AI Studio"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-ai-studio"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Infermatic"),
            "privacy_policy_url": String("https://infermatic.ai/privacy-policy/"),
            "slug": String("infermatic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://infermatic.ai/terms-and-conditions/"),
        },
        Object {
            "name": String("InferenceNet"),
            "privacy_policy_url": String("https://inference.net/privacy-policy"),
            "slug": String("inference-net"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://inference.net/terms-of-service"),
        },
        Object {
            "name": String("Inception"),
            "privacy_policy_url": String("https://www.inceptionlabs.ai/terms#privacy-policy"),
            "slug": String("inception"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.inceptionlabs.ai/terms"),
        },
        Object {
            "name": String("Targon"),
            "privacy_policy_url": String("https://targon.com/privacy"),
            "slug": String("targon"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://targon.com/terms"),
        },
        Object {
            "name": String("Nebius"),
            "privacy_policy_url": String("https://docs.nebius.com/legal/studio/privacy/"),
            "slug": String("nebius"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://docs.nebius.com/legal/studio/terms-of-use/"),
        },
        Object {
            "name": String("Alibaba"),
            "privacy_policy_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-privacy-policy"),
            "slug": String("alibaba"),
            "status_page_url": String("https://status.alibabacloud.com/"),
            "terms_of_service_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-product-terms-of-service-v-3-8-0"),
        },
        Object {
            "name": String("Chutes"),
            "privacy_policy_url": Null,
            "slug": String("chutes"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://chutes.ai/tos"),
        },
        Object {
            "name": String("Friendli"),
            "privacy_policy_url": String("https://friendli.ai/privacypolicy"),
            "slug": String("friendli"),
            "status_page_url": String("https://status.friendli.ai/"),
            "terms_of_service_url": String("https://friendli.ai/terms-of-service"),
        },
        Object {
            "name": String("Ubicloud"),
            "privacy_policy_url": String("https://www.ubicloud.com/docs/about/privacy-policy"),
            "slug": String("ubicloud"),
            "status_page_url": String("https://status.ubicloud.com/"),
            "terms_of_service_url": String("https://www.ubicloud.com/docs/about/terms-of-service"),
        },
        Object {
            "name": String("Cloudflare"),
            "privacy_policy_url": String("https://developers.cloudflare.com/workers-ai/privacy"),
            "slug": String("cloudflare"),
            "status_page_url": String("https://www.cloudflarestatus.com/"),
            "terms_of_service_url": String("https://www.cloudflare.com/service-specific-terms-developer-platform/#developer-platform-terms"),
        },
        Object {
            "name": String("AionLabs"),
            "privacy_policy_url": String("https://www.aionlabs.ai/privacy-policy/"),
            "slug": String("aion-labs"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.aionlabs.ai/terms/"),
        },
        Object {
            "name": String("Liquid"),
            "privacy_policy_url": String("https://www.liquid.ai/privacy-policy"),
            "slug": String("liquid"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.liquid.ai/terms-conditions"),
        },
        Object {
            "name": String("DeepInfra"),
            "privacy_policy_url": String("https://deepinfra.com/privacy"),
            "slug": String("deepinfra"),
            "status_page_url": String("https://status.deepinfra.com/"),
            "terms_of_service_url": String("https://deepinfra.com/terms"),
        },
        Object {
            "name": String("Nineteen"),
            "privacy_policy_url": Null,
            "slug": String("nineteen"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://nineteen.ai/tos"),
        },
        Object {
            "name": String("Enfer"),
            "privacy_policy_url": String("https://enfer.ai/privacy-policy"),
            "slug": String("enfer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://enfer.ai/privacy-policy"),
        },
        Object {
            "name": String("CrofAI"),
            "privacy_policy_url": String("https://ai.nahcrof.com/privacy"),
            "slug": String("crofai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Phala"),
            "privacy_policy_url": String("https://red-pill.ai/privacy"),
            "slug": String("phala"),
            "status_page_url": String("https://status.phala.network/"),
            "terms_of_service_url": String("https://red-pill.ai/terms"),
        },
        Object {
            "name": String("OpenInference"),
            "privacy_policy_url": String("https://www.openinference.xyz/terms"),
            "slug": String("open-inference"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.openinference.xyz/terms"),
        },
        Object {
            "name": String("Meta"),
            "privacy_policy_url": String("https://www.facebook.com/privacy/policy/"),
            "slug": String("meta"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://llama.developer.meta.com/legal/terms-of-service"),
        },
        Object {
            "name": String("Parasail"),
            "privacy_policy_url": String("https://www.parasail.io/legal/privacy-policy"),
            "slug": String("parasail"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.parasail.io/legal/terms"),
        },
        Object {
            "name": String("GMICloud"),
            "privacy_policy_url": String("https://docs.gmicloud.ai/privacy"),
            "slug": String("gmicloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
    ],
}

    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:396 on ThreadId(2)

  2025-08-28T01:24:47.828608Z  INFO e2e_openrouter_tools_app: model: x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:47.970438Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:24:47.970464Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:48.108316Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:24:48.108338Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:48.255482Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:24:48.255525Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:48.477708Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview:free: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:24:48.477755Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview:free | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:24:48.477766Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:24:48.477775Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:48.635924Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:24:48.635963Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:24:48.635977Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:24:48.635990Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:48.803501Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:24:48.803546Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:48.987970Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for deepseek/deepseek-v3.1-base: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:24:48.988012Z  WARN e2e_openrouter_tools_app: deepseek/deepseek-v3.1-base | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:24:48.988027Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:24:48.988036Z  INFO e2e_openrouter_tools_app: model: openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:24:49.279543Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for openai/gpt-4o-audio-preview: OpenAI | openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:24:49.279803Z  INFO ploke_tui::event_bus: close, time.busy: 22.1µs, time.idle: 7.51µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: c32ec0c0-fcf2-4528-b560-14409bdd0604, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:24:49.279882Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 131µs, time.idle: 28.0µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: c32ec0c0-fcf2-4528-b560-14409bdd0604, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:24:49.279903Z  INFO ploke_tui::event_bus: close, time.busy: 1.76µs, time.idle: 1.88µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:24:49.281024Z  INFO ploke_tui::event_bus: close, time.busy: 4.28µs, time.idle: 2.38µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: d13ef496-7181-4690-8b9f-d7e32b848c59, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:24:49.281051Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 39.4µs, time.idle: 7.21µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: d13ef496-7181-4690-8b9f-d7e32b848c59, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:24:49.380800Z  INFO ploke_tui::event_bus: close, time.busy: 18.6µs, time.idle: 13.8µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:24:49.380885Z  INFO ploke_tui::event_bus: close, time.busy: 3.62µs, time.idle: 4.20µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:24:49.380951Z  INFO ploke_tui::llm: Received LLM request for parent_id: 06ed5500-ee58-4674-b352-c890af105808
new_msg_id: 489bbd9b-b98a-40e5-93ec-2841faa6ff96
    at crates/ploke-tui/src/llm/mod.rs:279 on ThreadId(2)

  2025-08-28T01:24:49.380973Z  INFO ploke_tui::llm: Received context for parent_id: 06ed5500-ee58-4674-b352-c890af105808
    at crates/ploke-tui/src/llm/mod.rs:290 on ThreadId(2)

  2025-08-28T01:24:49.380999Z  INFO ploke_tui::llm: pending_requests found match for req_parent: 06ed5500-ee58-4674-b352-c890af105808
    at crates/ploke-tui/src/llm/mod.rs:312 on ThreadId(2)

  2025-08-28T01:24:49.381011Z  INFO ploke_tui::llm: ready_contexts found match for req_parent: 06ed5500-ee58-4674-b352-c890af105808
    at crates/ploke-tui/src/llm/mod.rs:317 on ThreadId(2)

  2025-08-28T01:24:49.381031Z  INFO ploke_tui::llm: removing id from pending_requests
    at crates/ploke-tui/src/llm/mod.rs:330 on ThreadId(2)

  2025-08-28T01:24:49.381099Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:489 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: a3190402-27e7-418c-ac6b-625d39f1afa5, parent_id: 06ed5500-ee58-4674-b352-c890af105808, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: 489bbd9b-b98a-40e5-93ec-2841faa6ff96 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7faf4c32e100, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 06ed5500-ee58-4674-b352-c890af105808 })

  2025-08-28T01:24:49.381115Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:501 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: a3190402-27e7-418c-ac6b-625d39f1afa5, parent_id: 06ed5500-ee58-4674-b352-c890af105808, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: 489bbd9b-b98a-40e5-93ec-2841faa6ff96 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7faf4c32e100, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 06ed5500-ee58-4674-b352-c890af105808 })

  2025-08-28T01:24:49.381155Z ERROR ploke_tui::llm: Failed to create assistant message: state_manager dropped responder.
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/llm/mod.rs:518 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: a3190402-27e7-418c-ac6b-625d39f1afa5, parent_id: 06ed5500-ee58-4674-b352-c890af105808, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: 489bbd9b-b98a-40e5-93ec-2841faa6ff96 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7faf4c32e100, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 06ed5500-ee58-4674-b352-c890af105808 })

  2025-08-28T01:24:49.381175Z  INFO ploke_tui::llm: close, time.busy: 63.5µs, time.idle: 25.2µs
    at crates/ploke-tui/src/llm/mod.rs:479 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: a3190402-27e7-418c-ac6b-625d39f1afa5, parent_id: 06ed5500-ee58-4674-b352-c890af105808, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: 489bbd9b-b98a-40e5-93ec-2841faa6ff96 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7faf4c32e100, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 06ed5500-ee58-4674-b352-c890af105808 })

  2025-08-28T01:25:22.538737Z  INFO ploke_rag::core: close, time.busy: 32.5µs, time.idle: 24.3µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:25:23.752178Z  INFO e2e_openrouter_tools_app: models/user returned 320 entries
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:374 on ThreadId(2)

  2025-08-28T01:25:23.853414Z  INFO e2e_openrouter_tools_app: Full response infodump:
Object {
    "data": Array [
        Object {
            "name": String("Z.AI"),
            "privacy_policy_url": Null,
            "slug": String("z-ai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("SambaNova"),
            "privacy_policy_url": String("https://sambanova.ai/privacy-policy"),
            "slug": String("sambanova"),
            "status_page_url": String("https://status.sambanova.ai/"),
            "terms_of_service_url": String("https://sambanova.ai/terms-and-conditions"),
        },
        Object {
            "name": String("Kluster"),
            "privacy_policy_url": String("https://www.kluster.ai/privacy-policy"),
            "slug": String("klusterai"),
            "status_page_url": String("https://status.klusterai.dev/"),
            "terms_of_service_url": String("https://www.kluster.ai/terms-of-use"),
        },
        Object {
            "name": String("Together"),
            "privacy_policy_url": String("https://www.together.ai/privacy"),
            "slug": String("together"),
            "status_page_url": String("https://status.together.ai/"),
            "terms_of_service_url": String("https://www.together.ai/terms-of-service"),
        },
        Object {
            "name": String("Cerebras"),
            "privacy_policy_url": String("https://www.cerebras.ai/privacy-policy"),
            "slug": String("cerebras"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.cerebras.ai/terms-of-service"),
        },
        Object {
            "name": String("Venice"),
            "privacy_policy_url": String("https://venice.ai/legal/privacy-policy"),
            "slug": String("venice"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://venice.ai/legal/tos"),
        },
        Object {
            "name": String("Morph"),
            "privacy_policy_url": String("https://morphllm.com/privacy"),
            "slug": String("morph"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Moonshot AI"),
            "privacy_policy_url": String("https://platform.moonshot.ai/docs/agreement/userprivacy"),
            "slug": String("moonshotai"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://platform.moonshot.ai/docs/agreement/modeluse"),
        },
        Object {
            "name": String("OpenAI"),
            "privacy_policy_url": String("https://openai.com/policies/privacy-policy/"),
            "slug": String("openai"),
            "status_page_url": String("https://status.openai.com/"),
            "terms_of_service_url": String("https://openai.com/policies/row-terms-of-use/"),
        },
        Object {
            "name": String("Stealth"),
            "privacy_policy_url": Null,
            "slug": String("stealth"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("WandB"),
            "privacy_policy_url": Null,
            "slug": String("wandb"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("AtlasCloud"),
            "privacy_policy_url": String("https://www.atlascloud.ai/privacy"),
            "slug": String("atlas-cloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Amazon Bedrock"),
            "privacy_policy_url": String("https://aws.amazon.com/privacy"),
            "slug": String("amazon-bedrock"),
            "status_page_url": String("https://health.aws.amazon.com/health/status"),
            "terms_of_service_url": String("https://aws.amazon.com/service-terms/"),
        },
        Object {
            "name": String("Groq"),
            "privacy_policy_url": String("https://groq.com/privacy-policy/"),
            "slug": String("groq"),
            "status_page_url": String("https://status.groq.com/"),
            "terms_of_service_url": String("https://groq.com/terms-of-use/"),
        },
        Object {
            "name": String("Featherless"),
            "privacy_policy_url": String("https://featherless.ai/privacy"),
            "slug": String("featherless"),
            "status_page_url": String("https://featherless.ai/status"),
            "terms_of_service_url": String("https://featherless.ai/terms"),
        },
        Object {
            "name": String("NextBit"),
            "privacy_policy_url": String("https://www.nextbit256.com/docs/privacy-policy"),
            "slug": String("nextbit"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.nextbit256.com/docs/terms-of-service"),
        },
        Object {
            "name": String("Atoma"),
            "privacy_policy_url": Null,
            "slug": String("atoma"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://atoma.network/terms_of_service"),
        },
        Object {
            "name": String("BaseTen"),
            "privacy_policy_url": String("https://www.baseten.co/privacy-policy"),
            "slug": String("baseten"),
            "status_page_url": String("https://status.baseten.co/"),
            "terms_of_service_url": String("https://www.baseten.co/terms-and-conditions"),
        },
        Object {
            "name": String("AI21"),
            "privacy_policy_url": String("https://www.ai21.com/privacy-policy/"),
            "slug": String("ai21"),
            "status_page_url": String("https://status.ai21.com/"),
            "terms_of_service_url": String("https://www.ai21.com/terms-of-service/"),
        },
        Object {
            "name": String("Minimax"),
            "privacy_policy_url": String("https://www.minimax.io/platform/protocol/privacy-policy"),
            "slug": String("minimax"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.minimax.io/platform/protocol/terms-of-service"),
        },
        Object {
            "name": String("Mistral"),
            "privacy_policy_url": String("https://mistral.ai/terms/#privacy-policy"),
            "slug": String("mistral"),
            "status_page_url": String("https://status.mistral.ai/"),
            "terms_of_service_url": String("https://mistral.ai/terms/#terms-of-use"),
        },
        Object {
            "name": String("Anthropic"),
            "privacy_policy_url": String("https://www.anthropic.com/legal/privacy"),
            "slug": String("anthropic"),
            "status_page_url": String("https://status.anthropic.com/"),
            "terms_of_service_url": String("https://www.anthropic.com/legal/commercial-terms"),
        },
        Object {
            "name": String("Lambda"),
            "privacy_policy_url": String("https://lambda.ai/legal/privacy-policy"),
            "slug": String("lambda"),
            "status_page_url": String("https://status.lambdalabs.com/"),
            "terms_of_service_url": String("https://lambda.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("Hyperbolic"),
            "privacy_policy_url": String("https://hyperbolic.xyz/privacy"),
            "slug": String("hyperbolic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://hyperbolic.xyz/terms"),
        },
        Object {
            "name": String("NCompass"),
            "privacy_policy_url": String("https://ncompass.tech/privacy"),
            "slug": String("ncompass"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://ncompass.tech/terms"),
        },
        Object {
            "name": String("Azure"),
            "privacy_policy_url": String("https://www.microsoft.com/en-us/privacy/privacystatement"),
            "slug": String("azure"),
            "status_page_url": String("https://status.azure.com/"),
            "terms_of_service_url": String("https://www.microsoft.com/en-us/legal/terms-of-use?oneroute=true"),
        },
        Object {
            "name": String("DeepSeek"),
            "privacy_policy_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Privacy%20Policy.html"),
            "slug": String("deepseek"),
            "status_page_url": String("https://status.deepseek.com/"),
            "terms_of_service_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Terms%20of%20Use.html"),
        },
        Object {
            "name": String("Crusoe"),
            "privacy_policy_url": String("https://legal.crusoe.ai/open-router#cloud-privacy-policy"),
            "slug": String("crusoe"),
            "status_page_url": String("https://status.crusoecloud.com/"),
            "terms_of_service_url": String("https://legal.crusoe.ai/open-router#managed-inference-tos-open-router"),
        },
        Object {
            "name": String("Cohere"),
            "privacy_policy_url": String("https://cohere.com/privacy"),
            "slug": String("cohere"),
            "status_page_url": String("https://status.cohere.ai/"),
            "terms_of_service_url": String("https://cohere.com/terms-of-use"),
        },
        Object {
            "name": String("Google"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-vertex"),
            "status_page_url": String("https://status.cloud.google.com/products/sdXM79fz1FS6ekNpu37K/history"),
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Mancer 2"),
            "privacy_policy_url": String("https://mancer.tech/privacy"),
            "slug": String("mancer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://mancer.tech/terms"),
        },
        Object {
            "name": String("Perplexity"),
            "privacy_policy_url": String("https://www.perplexity.ai/hub/legal/privacy-policy"),
            "slug": String("perplexity"),
            "status_page_url": String("https://status.perplexity.ai/"),
            "terms_of_service_url": String("https://www.perplexity.ai/hub/legal/perplexity-api-terms-of-service"),
        },
        Object {
            "name": String("Avian"),
            "privacy_policy_url": String("https://avian.io/privacy"),
            "slug": String("avian"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://avian.io/terms"),
        },
        Object {
            "name": String("Novita"),
            "privacy_policy_url": String("https://novita.ai/legal/privacy-policy"),
            "slug": String("novita"),
            "status_page_url": String("https://status.novita.ai/"),
            "terms_of_service_url": String("https://novita.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("SiliconFlow"),
            "privacy_policy_url": Null,
            "slug": String("siliconflow"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Switchpoint"),
            "privacy_policy_url": Null,
            "slug": String("switchpoint"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Fireworks"),
            "privacy_policy_url": String("https://fireworks.ai/privacy-policy"),
            "slug": String("fireworks"),
            "status_page_url": String("https://status.fireworks.ai/"),
            "terms_of_service_url": String("https://fireworks.ai/terms-of-service"),
        },
        Object {
            "name": String("Inflection"),
            "privacy_policy_url": String("https://inflection.ai/privacy-policy"),
            "slug": String("inflection"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://developers.inflection.ai/tos"),
        },
        Object {
            "name": String("xAI"),
            "privacy_policy_url": String("https://x.ai/legal/privacy-policy"),
            "slug": String("xai"),
            "status_page_url": String("https://status.x.ai/"),
            "terms_of_service_url": String("https://x.ai/legal/terms-of-service-enterprise"),
        },
        Object {
            "name": String("Google AI Studio"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-ai-studio"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Infermatic"),
            "privacy_policy_url": String("https://infermatic.ai/privacy-policy/"),
            "slug": String("infermatic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://infermatic.ai/terms-and-conditions/"),
        },
        Object {
            "name": String("InferenceNet"),
            "privacy_policy_url": String("https://inference.net/privacy-policy"),
            "slug": String("inference-net"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://inference.net/terms-of-service"),
        },
        Object {
            "name": String("Inception"),
            "privacy_policy_url": String("https://www.inceptionlabs.ai/terms#privacy-policy"),
            "slug": String("inception"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.inceptionlabs.ai/terms"),
        },
        Object {
            "name": String("Targon"),
            "privacy_policy_url": String("https://targon.com/privacy"),
            "slug": String("targon"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://targon.com/terms"),
        },
        Object {
            "name": String("Nebius"),
            "privacy_policy_url": String("https://docs.nebius.com/legal/studio/privacy/"),
            "slug": String("nebius"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://docs.nebius.com/legal/studio/terms-of-use/"),
        },
        Object {
            "name": String("Alibaba"),
            "privacy_policy_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-privacy-policy"),
            "slug": String("alibaba"),
            "status_page_url": String("https://status.alibabacloud.com/"),
            "terms_of_service_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-product-terms-of-service-v-3-8-0"),
        },
        Object {
            "name": String("Chutes"),
            "privacy_policy_url": Null,
            "slug": String("chutes"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://chutes.ai/tos"),
        },
        Object {
            "name": String("Friendli"),
            "privacy_policy_url": String("https://friendli.ai/privacypolicy"),
            "slug": String("friendli"),
            "status_page_url": String("https://status.friendli.ai/"),
            "terms_of_service_url": String("https://friendli.ai/terms-of-service"),
        },
        Object {
            "name": String("Ubicloud"),
            "privacy_policy_url": String("https://www.ubicloud.com/docs/about/privacy-policy"),
            "slug": String("ubicloud"),
            "status_page_url": String("https://status.ubicloud.com/"),
            "terms_of_service_url": String("https://www.ubicloud.com/docs/about/terms-of-service"),
        },
        Object {
            "name": String("Cloudflare"),
            "privacy_policy_url": String("https://developers.cloudflare.com/workers-ai/privacy"),
            "slug": String("cloudflare"),
            "status_page_url": String("https://www.cloudflarestatus.com/"),
            "terms_of_service_url": String("https://www.cloudflare.com/service-specific-terms-developer-platform/#developer-platform-terms"),
        },
        Object {
            "name": String("AionLabs"),
            "privacy_policy_url": String("https://www.aionlabs.ai/privacy-policy/"),
            "slug": String("aion-labs"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.aionlabs.ai/terms/"),
        },
        Object {
            "name": String("Liquid"),
            "privacy_policy_url": String("https://www.liquid.ai/privacy-policy"),
            "slug": String("liquid"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.liquid.ai/terms-conditions"),
        },
        Object {
            "name": String("DeepInfra"),
            "privacy_policy_url": String("https://deepinfra.com/privacy"),
            "slug": String("deepinfra"),
            "status_page_url": String("https://status.deepinfra.com/"),
            "terms_of_service_url": String("https://deepinfra.com/terms"),
        },
        Object {
            "name": String("Nineteen"),
            "privacy_policy_url": Null,
            "slug": String("nineteen"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://nineteen.ai/tos"),
        },
        Object {
            "name": String("Enfer"),
            "privacy_policy_url": String("https://enfer.ai/privacy-policy"),
            "slug": String("enfer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://enfer.ai/privacy-policy"),
        },
        Object {
            "name": String("CrofAI"),
            "privacy_policy_url": String("https://ai.nahcrof.com/privacy"),
            "slug": String("crofai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Phala"),
            "privacy_policy_url": String("https://red-pill.ai/privacy"),
            "slug": String("phala"),
            "status_page_url": String("https://status.phala.network/"),
            "terms_of_service_url": String("https://red-pill.ai/terms"),
        },
        Object {
            "name": String("OpenInference"),
            "privacy_policy_url": String("https://www.openinference.xyz/terms"),
            "slug": String("open-inference"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.openinference.xyz/terms"),
        },
        Object {
            "name": String("Meta"),
            "privacy_policy_url": String("https://www.facebook.com/privacy/policy/"),
            "slug": String("meta"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://llama.developer.meta.com/legal/terms-of-service"),
        },
        Object {
            "name": String("Parasail"),
            "privacy_policy_url": String("https://www.parasail.io/legal/privacy-policy"),
            "slug": String("parasail"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.parasail.io/legal/terms"),
        },
        Object {
            "name": String("GMICloud"),
            "privacy_policy_url": String("https://docs.gmicloud.ai/privacy"),
            "slug": String("gmicloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
    ],
}

    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:396 on ThreadId(2)

  2025-08-28T01:25:23.853772Z  INFO e2e_openrouter_tools_app: model: x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:23.958570Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:25:23.958597Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:24.069206Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:25:24.069251Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:24.292026Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:25:24.292071Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:24.401538Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview:free: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:25:24.401563Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview:free | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:25:24.401569Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:25:24.401574Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:24.514589Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:25:24.514609Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:25:24.514615Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:25:24.514619Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:24.754009Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:25:24.754043Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:24.862847Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for deepseek/deepseek-v3.1-base: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:25:24.862894Z  WARN e2e_openrouter_tools_app: deepseek/deepseek-v3.1-base | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:25:24.862907Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:25:24.862917Z  INFO e2e_openrouter_tools_app: model: openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:25.000284Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for openai/gpt-4o-audio-preview: OpenAI | openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:25:25.000497Z  INFO ploke_tui::event_bus: close, time.busy: 12.3µs, time.idle: 4.26µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: aab0d3bb-44fc-4cf1-8298-935c1a573486, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:25:25.000536Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 72.0µs, time.idle: 18.3µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: aab0d3bb-44fc-4cf1-8298-935c1a573486, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:25:25.000551Z  INFO ploke_tui::event_bus: close, time.busy: 1.63µs, time.idle: 1.79µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:25:25.001678Z  INFO ploke_tui::event_bus: close, time.busy: 4.32µs, time.idle: 2.54µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 603ff12f-198e-4768-923f-85ef37ee1696, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:25:25.001705Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 40.4µs, time.idle: 7.80µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 603ff12f-198e-4768-923f-85ef37ee1696, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:25:25.101446Z  INFO ploke_tui::event_bus: close, time.busy: 11.5µs, time.idle: 8.88µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:25:25.101500Z  INFO ploke_tui::event_bus: close, time.busy: 2.73µs, time.idle: 4.07µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:25:25.101549Z  INFO ploke_tui::llm: Received LLM request for parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f
new_msg_id: d7d6ed50-c7b1-4868-9736-72ea59e8d4c6
    at crates/ploke-tui/src/llm/mod.rs:279 on ThreadId(2)

  2025-08-28T01:25:25.101568Z  INFO ploke_tui::llm: Received context for parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f
    at crates/ploke-tui/src/llm/mod.rs:290 on ThreadId(2)

  2025-08-28T01:25:25.101591Z  INFO ploke_tui::llm: pending_requests found match for req_parent: 042b1ddb-daa1-426f-9ffe-a62550a3c52f
    at crates/ploke-tui/src/llm/mod.rs:312 on ThreadId(2)

  2025-08-28T01:25:25.101603Z  INFO ploke_tui::llm: ready_contexts found match for req_parent: 042b1ddb-daa1-426f-9ffe-a62550a3c52f
    at crates/ploke-tui/src/llm/mod.rs:317 on ThreadId(2)

  2025-08-28T01:25:25.101623Z  INFO ploke_tui::llm: removing id from pending_requests
    at crates/ploke-tui/src/llm/mod.rs:330 on ThreadId(2)

  2025-08-28T01:25:25.101703Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:489 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: eff40528-fef7-4d14-b04a-1121b73e89e6, parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: d7d6ed50-c7b1-4868-9736-72ea59e8d4c6 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f })

  2025-08-28T01:25:25.101733Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:501 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: eff40528-fef7-4d14-b04a-1121b73e89e6, parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: d7d6ed50-c7b1-4868-9736-72ea59e8d4c6 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f })

  2025-08-28T01:25:25.101801Z ERROR ploke_tui::llm: Failed to create assistant message: state_manager dropped responder.
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/llm/mod.rs:518 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: eff40528-fef7-4d14-b04a-1121b73e89e6, parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: d7d6ed50-c7b1-4868-9736-72ea59e8d4c6 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f })

  2025-08-28T01:25:25.101844Z  INFO ploke_tui::llm: close, time.busy: 121µs, time.idle: 44.9µs
    at crates/ploke-tui/src/llm/mod.rs:479 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: eff40528-fef7-4d14-b04a-1121b73e89e6, parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: d7d6ed50-c7b1-4868-9736-72ea59e8d4c6 }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 042b1ddb-daa1-426f-9ffe-a62550a3c52f })

  2025-08-28T01:25:45.144986Z  INFO e2e_openrouter_tools_app: model: mistralai/mistral-medium-3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:25:45.272615Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for mistralai/mistral-medium-3.1: Mistral | mistralai/mistral-medium-3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:25:45.272895Z  INFO ploke_tui::event_bus: close, time.busy: 21.0µs, time.idle: 8.09µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 1de09e18-2a99-404f-afa4-c63174b3ce0b, content: "Switched active model to mistralai/mistral-medium-3.1 via provider mistral---mistralai-mistral-medium-3-1", kind: SysInfo

  2025-08-28T01:25:45.272969Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 145µs, time.idle: 29.4µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 1de09e18-2a99-404f-afa4-c63174b3ce0b, content: "Switched active model to mistralai/mistral-medium-3.1 via provider mistral---mistralai-mistral-medium-3-1", kind: SysInfo

  2025-08-28T01:25:45.272999Z  INFO ploke_tui::event_bus: close, time.busy: 3.11µs, time.idle: 3.62µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:25:45.274554Z  INFO ploke_tui::event_bus: close, time.busy: 4.61µs, time.idle: 2.46µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: a756cab2-ac94-403f-b557-60f301a7afea, content: "model changed from openai/gpt-4o-audio-preview to mistralai/mistral-medium-3.1", kind: SysInfo

  2025-08-28T01:25:45.274581Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 41.2µs, time.idle: 7.79µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: a756cab2-ac94-403f-b557-60f301a7afea, content: "model changed from openai/gpt-4o-audio-preview to mistralai/mistral-medium-3.1", kind: SysInfo

  2025-08-28T01:25:45.373528Z  INFO ploke_tui::event_bus: close, time.busy: 12.3µs, time.idle: 9.16µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:25:45.373584Z  INFO ploke_tui::event_bus: close, time.busy: 2.79µs, time.idle: 3.86µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:25:45.373630Z  INFO ploke_tui::llm: Received LLM request for parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee
new_msg_id: b244de6a-7a59-43ac-81c3-55ad014d1bce
    at crates/ploke-tui/src/llm/mod.rs:279 on ThreadId(2)

  2025-08-28T01:25:45.373651Z  INFO ploke_tui::llm: Received context for parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee
    at crates/ploke-tui/src/llm/mod.rs:290 on ThreadId(2)

  2025-08-28T01:25:45.373672Z  INFO ploke_tui::llm: pending_requests found match for req_parent: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee
    at crates/ploke-tui/src/llm/mod.rs:312 on ThreadId(2)

  2025-08-28T01:25:45.373683Z  INFO ploke_tui::llm: ready_contexts found match for req_parent: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee
    at crates/ploke-tui/src/llm/mod.rs:317 on ThreadId(2)

  2025-08-28T01:25:45.373704Z  INFO ploke_tui::llm: removing id from pending_requests
    at crates/ploke-tui/src/llm/mod.rs:330 on ThreadId(2)

  2025-08-28T01:25:45.373784Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:489 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: 2196d5da-ec18-4896-bb2d-6d82cc7e3003, parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: b244de6a-7a59-43ac-81c3-55ad014d1bce }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 5 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee })

  2025-08-28T01:25:45.373811Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:501 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: 2196d5da-ec18-4896-bb2d-6d82cc7e3003, parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: b244de6a-7a59-43ac-81c3-55ad014d1bce }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 5 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee })

  2025-08-28T01:25:45.373886Z ERROR ploke_tui::llm: Failed to create assistant message: state_manager dropped responder.
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/llm/mod.rs:518 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: 2196d5da-ec18-4896-bb2d-6d82cc7e3003, parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: b244de6a-7a59-43ac-81c3-55ad014d1bce }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 5 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee })

  2025-08-28T01:25:45.373920Z  INFO ploke_tui::llm: close, time.busy: 116µs, time.idle: 45.0µs
    at crates/ploke-tui/src/llm/mod.rs:479 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with request: Request { request_id: 2196d5da-ec18-4896-bb2d-6d82cc7e3003, parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee, prompt: "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.", parameters: LLMParameters { model: "moonshotai/kimi-k2", temperature: None, top_p: None, max_tokens: None, presence_penalty: None, frequency_penalty: None, stop_sequences: [], parallel_tool_calls: true, response_format: Text, safety_settings: SafetySettings { hate: 0, harassment: 0, self_harm: 0, sexual_content: 0 }, system_prompt: None, tool_max_retries: Some(2), tool_token_limit: Some(2048), history_char_budget: Some(12000), tool_timeout_secs: Some(30) }, new_msg_id: b244de6a-7a59-43ac-81c3-55ad014d1bce }, cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7fa94432f510, tail_position: 5 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 6859947b-45f2-4b05-b9a0-aeeb84e4a1ee })

  2025-08-28T01:26:05.414492Z  INFO e2e_openrouter_tools_app: model: baidu/ernie-4.5-21b-a3b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:26:05.544839Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for baidu/ernie-4.5-21b-a3b: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:26:05.544886Z  WARN e2e_openrouter_tools_app: baidu/ernie-4.5-21b-a3b | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:26:05.544902Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping baidu/ernie-4.5-21b-a3b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:26:05.545247Z  INFO e2e_openrouter_tools_app: Summary: total_outcomes=4 successes=0 no_tool_calls=4 http_404_first_leg=0 http_429_any_leg=0
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:595 on ThreadId(2)

  2025-08-28T01:28:58.108393Z  INFO ploke_rag::core: close, time.busy: 26.6µs, time.idle: 22.4µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:28:59.808110Z  INFO e2e_openrouter_tools_app: models/user returned 320 entries
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:374 on ThreadId(2)

  2025-08-28T01:28:59.988082Z  INFO e2e_openrouter_tools_app: Full response infodump:
Object {
    "data": Array [
        Object {
            "name": String("Z.AI"),
            "privacy_policy_url": Null,
            "slug": String("z-ai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("SambaNova"),
            "privacy_policy_url": String("https://sambanova.ai/privacy-policy"),
            "slug": String("sambanova"),
            "status_page_url": String("https://status.sambanova.ai/"),
            "terms_of_service_url": String("https://sambanova.ai/terms-and-conditions"),
        },
        Object {
            "name": String("Kluster"),
            "privacy_policy_url": String("https://www.kluster.ai/privacy-policy"),
            "slug": String("klusterai"),
            "status_page_url": String("https://status.klusterai.dev/"),
            "terms_of_service_url": String("https://www.kluster.ai/terms-of-use"),
        },
        Object {
            "name": String("Together"),
            "privacy_policy_url": String("https://www.together.ai/privacy"),
            "slug": String("together"),
            "status_page_url": String("https://status.together.ai/"),
            "terms_of_service_url": String("https://www.together.ai/terms-of-service"),
        },
        Object {
            "name": String("Cerebras"),
            "privacy_policy_url": String("https://www.cerebras.ai/privacy-policy"),
            "slug": String("cerebras"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.cerebras.ai/terms-of-service"),
        },
        Object {
            "name": String("Venice"),
            "privacy_policy_url": String("https://venice.ai/legal/privacy-policy"),
            "slug": String("venice"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://venice.ai/legal/tos"),
        },
        Object {
            "name": String("Morph"),
            "privacy_policy_url": String("https://morphllm.com/privacy"),
            "slug": String("morph"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Moonshot AI"),
            "privacy_policy_url": String("https://platform.moonshot.ai/docs/agreement/userprivacy"),
            "slug": String("moonshotai"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://platform.moonshot.ai/docs/agreement/modeluse"),
        },
        Object {
            "name": String("OpenAI"),
            "privacy_policy_url": String("https://openai.com/policies/privacy-policy/"),
            "slug": String("openai"),
            "status_page_url": String("https://status.openai.com/"),
            "terms_of_service_url": String("https://openai.com/policies/row-terms-of-use/"),
        },
        Object {
            "name": String("Stealth"),
            "privacy_policy_url": Null,
            "slug": String("stealth"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("WandB"),
            "privacy_policy_url": Null,
            "slug": String("wandb"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("AtlasCloud"),
            "privacy_policy_url": String("https://www.atlascloud.ai/privacy"),
            "slug": String("atlas-cloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Amazon Bedrock"),
            "privacy_policy_url": String("https://aws.amazon.com/privacy"),
            "slug": String("amazon-bedrock"),
            "status_page_url": String("https://health.aws.amazon.com/health/status"),
            "terms_of_service_url": String("https://aws.amazon.com/service-terms/"),
        },
        Object {
            "name": String("Groq"),
            "privacy_policy_url": String("https://groq.com/privacy-policy/"),
            "slug": String("groq"),
            "status_page_url": String("https://status.groq.com/"),
            "terms_of_service_url": String("https://groq.com/terms-of-use/"),
        },
        Object {
            "name": String("Featherless"),
            "privacy_policy_url": String("https://featherless.ai/privacy"),
            "slug": String("featherless"),
            "status_page_url": String("https://featherless.ai/status"),
            "terms_of_service_url": String("https://featherless.ai/terms"),
        },
        Object {
            "name": String("NextBit"),
            "privacy_policy_url": String("https://www.nextbit256.com/docs/privacy-policy"),
            "slug": String("nextbit"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.nextbit256.com/docs/terms-of-service"),
        },
        Object {
            "name": String("Atoma"),
            "privacy_policy_url": Null,
            "slug": String("atoma"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://atoma.network/terms_of_service"),
        },
        Object {
            "name": String("BaseTen"),
            "privacy_policy_url": String("https://www.baseten.co/privacy-policy"),
            "slug": String("baseten"),
            "status_page_url": String("https://status.baseten.co/"),
            "terms_of_service_url": String("https://www.baseten.co/terms-and-conditions"),
        },
        Object {
            "name": String("AI21"),
            "privacy_policy_url": String("https://www.ai21.com/privacy-policy/"),
            "slug": String("ai21"),
            "status_page_url": String("https://status.ai21.com/"),
            "terms_of_service_url": String("https://www.ai21.com/terms-of-service/"),
        },
        Object {
            "name": String("Minimax"),
            "privacy_policy_url": String("https://www.minimax.io/platform/protocol/privacy-policy"),
            "slug": String("minimax"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.minimax.io/platform/protocol/terms-of-service"),
        },
        Object {
            "name": String("Mistral"),
            "privacy_policy_url": String("https://mistral.ai/terms/#privacy-policy"),
            "slug": String("mistral"),
            "status_page_url": String("https://status.mistral.ai/"),
            "terms_of_service_url": String("https://mistral.ai/terms/#terms-of-use"),
        },
        Object {
            "name": String("Anthropic"),
            "privacy_policy_url": String("https://www.anthropic.com/legal/privacy"),
            "slug": String("anthropic"),
            "status_page_url": String("https://status.anthropic.com/"),
            "terms_of_service_url": String("https://www.anthropic.com/legal/commercial-terms"),
        },
        Object {
            "name": String("Lambda"),
            "privacy_policy_url": String("https://lambda.ai/legal/privacy-policy"),
            "slug": String("lambda"),
            "status_page_url": String("https://status.lambdalabs.com/"),
            "terms_of_service_url": String("https://lambda.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("Hyperbolic"),
            "privacy_policy_url": String("https://hyperbolic.xyz/privacy"),
            "slug": String("hyperbolic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://hyperbolic.xyz/terms"),
        },
        Object {
            "name": String("NCompass"),
            "privacy_policy_url": String("https://ncompass.tech/privacy"),
            "slug": String("ncompass"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://ncompass.tech/terms"),
        },
        Object {
            "name": String("Azure"),
            "privacy_policy_url": String("https://www.microsoft.com/en-us/privacy/privacystatement"),
            "slug": String("azure"),
            "status_page_url": String("https://status.azure.com/"),
            "terms_of_service_url": String("https://www.microsoft.com/en-us/legal/terms-of-use?oneroute=true"),
        },
        Object {
            "name": String("DeepSeek"),
            "privacy_policy_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Privacy%20Policy.html"),
            "slug": String("deepseek"),
            "status_page_url": String("https://status.deepseek.com/"),
            "terms_of_service_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Terms%20of%20Use.html"),
        },
        Object {
            "name": String("Crusoe"),
            "privacy_policy_url": String("https://legal.crusoe.ai/open-router#cloud-privacy-policy"),
            "slug": String("crusoe"),
            "status_page_url": String("https://status.crusoecloud.com/"),
            "terms_of_service_url": String("https://legal.crusoe.ai/open-router#managed-inference-tos-open-router"),
        },
        Object {
            "name": String("Cohere"),
            "privacy_policy_url": String("https://cohere.com/privacy"),
            "slug": String("cohere"),
            "status_page_url": String("https://status.cohere.ai/"),
            "terms_of_service_url": String("https://cohere.com/terms-of-use"),
        },
        Object {
            "name": String("Google"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-vertex"),
            "status_page_url": String("https://status.cloud.google.com/products/sdXM79fz1FS6ekNpu37K/history"),
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Mancer 2"),
            "privacy_policy_url": String("https://mancer.tech/privacy"),
            "slug": String("mancer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://mancer.tech/terms"),
        },
        Object {
            "name": String("Perplexity"),
            "privacy_policy_url": String("https://www.perplexity.ai/hub/legal/privacy-policy"),
            "slug": String("perplexity"),
            "status_page_url": String("https://status.perplexity.ai/"),
            "terms_of_service_url": String("https://www.perplexity.ai/hub/legal/perplexity-api-terms-of-service"),
        },
        Object {
            "name": String("Avian"),
            "privacy_policy_url": String("https://avian.io/privacy"),
            "slug": String("avian"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://avian.io/terms"),
        },
        Object {
            "name": String("Novita"),
            "privacy_policy_url": String("https://novita.ai/legal/privacy-policy"),
            "slug": String("novita"),
            "status_page_url": String("https://status.novita.ai/"),
            "terms_of_service_url": String("https://novita.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("SiliconFlow"),
            "privacy_policy_url": Null,
            "slug": String("siliconflow"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Switchpoint"),
            "privacy_policy_url": Null,
            "slug": String("switchpoint"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Fireworks"),
            "privacy_policy_url": String("https://fireworks.ai/privacy-policy"),
            "slug": String("fireworks"),
            "status_page_url": String("https://status.fireworks.ai/"),
            "terms_of_service_url": String("https://fireworks.ai/terms-of-service"),
        },
        Object {
            "name": String("Inflection"),
            "privacy_policy_url": String("https://inflection.ai/privacy-policy"),
            "slug": String("inflection"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://developers.inflection.ai/tos"),
        },
        Object {
            "name": String("xAI"),
            "privacy_policy_url": String("https://x.ai/legal/privacy-policy"),
            "slug": String("xai"),
            "status_page_url": String("https://status.x.ai/"),
            "terms_of_service_url": String("https://x.ai/legal/terms-of-service-enterprise"),
        },
        Object {
            "name": String("Google AI Studio"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-ai-studio"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Infermatic"),
            "privacy_policy_url": String("https://infermatic.ai/privacy-policy/"),
            "slug": String("infermatic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://infermatic.ai/terms-and-conditions/"),
        },
        Object {
            "name": String("InferenceNet"),
            "privacy_policy_url": String("https://inference.net/privacy-policy"),
            "slug": String("inference-net"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://inference.net/terms-of-service"),
        },
        Object {
            "name": String("Inception"),
            "privacy_policy_url": String("https://www.inceptionlabs.ai/terms#privacy-policy"),
            "slug": String("inception"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.inceptionlabs.ai/terms"),
        },
        Object {
            "name": String("Targon"),
            "privacy_policy_url": String("https://targon.com/privacy"),
            "slug": String("targon"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://targon.com/terms"),
        },
        Object {
            "name": String("Nebius"),
            "privacy_policy_url": String("https://docs.nebius.com/legal/studio/privacy/"),
            "slug": String("nebius"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://docs.nebius.com/legal/studio/terms-of-use/"),
        },
        Object {
            "name": String("Alibaba"),
            "privacy_policy_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-privacy-policy"),
            "slug": String("alibaba"),
            "status_page_url": String("https://status.alibabacloud.com/"),
            "terms_of_service_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-product-terms-of-service-v-3-8-0"),
        },
        Object {
            "name": String("Chutes"),
            "privacy_policy_url": Null,
            "slug": String("chutes"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://chutes.ai/tos"),
        },
        Object {
            "name": String("Friendli"),
            "privacy_policy_url": String("https://friendli.ai/privacypolicy"),
            "slug": String("friendli"),
            "status_page_url": String("https://status.friendli.ai/"),
            "terms_of_service_url": String("https://friendli.ai/terms-of-service"),
        },
        Object {
            "name": String("Ubicloud"),
            "privacy_policy_url": String("https://www.ubicloud.com/docs/about/privacy-policy"),
            "slug": String("ubicloud"),
            "status_page_url": String("https://status.ubicloud.com/"),
            "terms_of_service_url": String("https://www.ubicloud.com/docs/about/terms-of-service"),
        },
        Object {
            "name": String("Cloudflare"),
            "privacy_policy_url": String("https://developers.cloudflare.com/workers-ai/privacy"),
            "slug": String("cloudflare"),
            "status_page_url": String("https://www.cloudflarestatus.com/"),
            "terms_of_service_url": String("https://www.cloudflare.com/service-specific-terms-developer-platform/#developer-platform-terms"),
        },
        Object {
            "name": String("AionLabs"),
            "privacy_policy_url": String("https://www.aionlabs.ai/privacy-policy/"),
            "slug": String("aion-labs"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.aionlabs.ai/terms/"),
        },
        Object {
            "name": String("Liquid"),
            "privacy_policy_url": String("https://www.liquid.ai/privacy-policy"),
            "slug": String("liquid"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.liquid.ai/terms-conditions"),
        },
        Object {
            "name": String("DeepInfra"),
            "privacy_policy_url": String("https://deepinfra.com/privacy"),
            "slug": String("deepinfra"),
            "status_page_url": String("https://status.deepinfra.com/"),
            "terms_of_service_url": String("https://deepinfra.com/terms"),
        },
        Object {
            "name": String("Nineteen"),
            "privacy_policy_url": Null,
            "slug": String("nineteen"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://nineteen.ai/tos"),
        },
        Object {
            "name": String("Enfer"),
            "privacy_policy_url": String("https://enfer.ai/privacy-policy"),
            "slug": String("enfer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://enfer.ai/privacy-policy"),
        },
        Object {
            "name": String("CrofAI"),
            "privacy_policy_url": String("https://ai.nahcrof.com/privacy"),
            "slug": String("crofai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Phala"),
            "privacy_policy_url": String("https://red-pill.ai/privacy"),
            "slug": String("phala"),
            "status_page_url": String("https://status.phala.network/"),
            "terms_of_service_url": String("https://red-pill.ai/terms"),
        },
        Object {
            "name": String("OpenInference"),
            "privacy_policy_url": String("https://www.openinference.xyz/terms"),
            "slug": String("open-inference"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.openinference.xyz/terms"),
        },
        Object {
            "name": String("Meta"),
            "privacy_policy_url": String("https://www.facebook.com/privacy/policy/"),
            "slug": String("meta"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://llama.developer.meta.com/legal/terms-of-service"),
        },
        Object {
            "name": String("Parasail"),
            "privacy_policy_url": String("https://www.parasail.io/legal/privacy-policy"),
            "slug": String("parasail"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.parasail.io/legal/terms"),
        },
        Object {
            "name": String("GMICloud"),
            "privacy_policy_url": String("https://docs.gmicloud.ai/privacy"),
            "slug": String("gmicloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
    ],
}

    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:396 on ThreadId(2)

  2025-08-28T01:28:59.988441Z  INFO e2e_openrouter_tools_app: model: x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:00.140979Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:29:00.141021Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:00.301852Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:29:00.301890Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:00.458214Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:29:00.458257Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:00.694623Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview:free: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:29:00.694649Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview:free | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:29:00.694655Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:29:00.694660Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:00.859842Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:29:00.859878Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:29:00.859888Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:29:00.859897Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:01.010477Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:29:01.010517Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:01.147621Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for deepseek/deepseek-v3.1-base: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:29:01.147643Z  WARN e2e_openrouter_tools_app: deepseek/deepseek-v3.1-base | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:29:01.147650Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:29:01.147656Z  INFO e2e_openrouter_tools_app: model: openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:29:01.417242Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for openai/gpt-4o-audio-preview: OpenAI | openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:29:01.417491Z  INFO ploke_tui::event_bus: close, time.busy: 20.1µs, time.idle: 7.62µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 4a47a76f-1fa0-4e1b-b1c0-13d43c3f164c, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:29:01.417560Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 122µs, time.idle: 26.5µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 4a47a76f-1fa0-4e1b-b1c0-13d43c3f164c, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:29:01.417590Z  INFO ploke_tui::event_bus: close, time.busy: 3.38µs, time.idle: 3.78µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:29:01.418803Z  INFO ploke_tui::event_bus: close, time.busy: 5.13µs, time.idle: 2.40µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: fe9576a7-bb4f-4a70-bd52-d1a2828f2a74, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:29:01.418833Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 43.6µs, time.idle: 8.16µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: fe9576a7-bb4f-4a70-bd52-d1a2828f2a74, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:29:01.518584Z  INFO ploke_tui::event_bus: close, time.busy: 12.1µs, time.idle: 9.35µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:29:01.518640Z  INFO ploke_tui::event_bus: close, time.busy: 3.01µs, time.idle: 3.93µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:29:01.518690Z  INFO ploke_tui::llm: Received LLM request for parent_id: 30e1e087-f311-4d89-82a3-190cea578ba4
new_msg_id: 8f423bb8-dc7d-4961-9bae-13417332d9ef
    at crates/ploke-tui/src/llm/mod.rs:279 on ThreadId(2)

  2025-08-28T01:29:01.518710Z  INFO ploke_tui::llm: Received context for parent_id: 30e1e087-f311-4d89-82a3-190cea578ba4
    at crates/ploke-tui/src/llm/mod.rs:290 on ThreadId(2)

  2025-08-28T01:29:01.518743Z  INFO ploke_tui::llm: pending_requests found match for req_parent: 30e1e087-f311-4d89-82a3-190cea578ba4
    at crates/ploke-tui/src/llm/mod.rs:312 on ThreadId(2)

  2025-08-28T01:29:01.518756Z  INFO ploke_tui::llm: ready_contexts found match for req_parent: 30e1e087-f311-4d89-82a3-190cea578ba4
    at crates/ploke-tui/src/llm/mod.rs:317 on ThreadId(2)

  2025-08-28T01:29:01.518777Z  INFO ploke_tui::llm: removing id from pending_requests
    at crates/ploke-tui/src/llm/mod.rs:330 on ThreadId(2)

  2025-08-28T01:29:01.518851Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:489 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7f26e82bcb80, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 30e1e087-f311-4d89-82a3-190cea578ba4 })

  2025-08-28T01:29:01.518879Z  INFO ploke_tui::llm: Inside process_llm_request
    at crates/ploke-tui/src/llm/mod.rs:501 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7f26e82bcb80, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 30e1e087-f311-4d89-82a3-190cea578ba4 })

  2025-08-28T01:29:01.518944Z ERROR ploke_tui::llm: Failed to create assistant message: state_manager dropped responder.
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/llm/mod.rs:518 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7f26e82bcb80, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 30e1e087-f311-4d89-82a3-190cea578ba4 })

  2025-08-28T01:29:01.518976Z  INFO ploke_tui::llm: close, time.busy: 105µs, time.idle: 47.7µs
    at crates/ploke-tui/src/llm/mod.rs:479 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with cmd_tx: Sender { chan: Tx { inner: Chan { tx: Tx { block_tail: 0x7f26e82bcb80, tail_position: 2 }, semaphore: Semaphore { semaphore: Semaphore { permits: 1024 }, bound: 1024 }, rx_waker: AtomicWaker, tx_count: 4, rx_fields: "..." } } }, event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, context: Some(PromptConstructed { prompt: [(System, "\n<-- SYSTEM PROMPT -->\nYou are a highly skilled software engineer, specializing in the Rust programming language.\n\nYou will be asked to provide some assistance in collaborating with the user.\n\nTool-aware code collaboration instructions\n\nYou can call tools to request more context and to stage code edits for user approval.\nUse the tools ONLY as described below.\n\nCode context format\n- You will receive code snippets as system messages. Headers may include:\n  - File: absolute path to the file\n  - Span: byte or line range the snippet covers\n  - File Hash: a UUID identifying the current on-disk content (TrackingHash)\n- Snippet hashes and byte ranges are for validation on our side; you should not compute them.\n\nHow to request more context\n- Call the tool request_code_context when you need additional code to proceed.\n- Arguments:\n  - token_budget: integer > 0 indicating approximately how many tokens of code to return\n  - hint: optional string that narrows the search (file path, symbol name, module, brief description)\n- Keep requests focused and iterative.\n\nHow to fetch file metadata (TrackingHash)\n- If you need file metadata for reasoning, call get_file_metadata with:\n  - file_path: absolute path to the file on disk\n- The tool returns the file's current tracking hash (UUID), byte length, and modified time.\n\nHow to propose code edits (rewrite an entire item)\n- Call apply_code_edit with:\n  {\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"example_crate/src/main.rs\",            // path relative to your project root\n        \"canon\": \"module_one::example_module::Thing\",   // canonical path of the item (no leading 'crate')\n        \"node_type\": \"function\",                         // one of: function|struct|enum|trait|type_alias|module|static|const|macro|import|impl|union\n        \"code\": \"fn thing() { /* new implementation */ }\"\n      }\n    ]\n  }\n- Notes:\n  - You do NOT provide byte offsets or hashes; we will resolve the canonical path to a node span and validate file hashes internally.\n  - Provide complete item definitions (rewrite), including attributes and docs where appropriate.\n\nExamples\n- Request context for a file by path:\n  request_code_context({ \"token_budget\": 2000, \"hint\": \"file: crates/ploke-tui/src/app_state/handlers/rag.rs\" })\n- Request context for a symbol:\n  request_code_context({ \"token_budget\": 1500, \"hint\": \"function: handle_tool_call_requested in rag.rs\" })\n- Stage a single-item rewrite:\n  apply_code_edit({\n    \"edits\": [\n      {\n        \"action\": \"code_edit\",\n        \"file\": \"crates/ploke-tui/src/app_state/handlers/rag.rs\",\n        \"canon\": \"app_state::handlers::rag::handle_tool_call_requested\",\n        \"node_type\": \"function\",\n        \"code\": \"pub async fn handle_tool_call_requested(/* ... */) { /* new body */ }\"\n      }\n    ]\n  })\n\nConversation structure\n- After the Code section below, the User's query appears under a # USER header.\n- If additional responses from collaborators appear (Assistant/Collaborator), treat them as context.\n- When uncertain, ask for missing details or request additional context precisely.\n\n# Code\n\n"), (User, "Hello, I would like you to help me understand the difference between the SimpleStruct and the GenericStruct in my code.\n\nIf tools are available, you MUST call the `request_code_context` tool with {\"token_budget\": 256} and wait for the tool result before responding.")], parent_id: 30e1e087-f311-4d89-82a3-190cea578ba4 })

  2025-08-28T01:36:38.186426Z  INFO ploke_rag::core: close, time.busy: 27.8µs, time.idle: 25.6µs
    at crates/ploke-rag/src/core/mod.rs:324 on ThreadId(2)
    in ploke_rag::core::bm25_rebuild

  2025-08-28T01:36:39.354671Z  INFO e2e_openrouter_tools_app: models/user returned 320 entries
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:374 on ThreadId(2)

  2025-08-28T01:36:39.493138Z  INFO e2e_openrouter_tools_app: Full response infodump:
Object {
    "data": Array [
        Object {
            "name": String("Z.AI"),
            "privacy_policy_url": Null,
            "slug": String("z-ai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("WandB"),
            "privacy_policy_url": Null,
            "slug": String("wandb"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("SambaNova"),
            "privacy_policy_url": String("https://sambanova.ai/privacy-policy"),
            "slug": String("sambanova"),
            "status_page_url": String("https://status.sambanova.ai/"),
            "terms_of_service_url": String("https://sambanova.ai/terms-and-conditions"),
        },
        Object {
            "name": String("Kluster"),
            "privacy_policy_url": String("https://www.kluster.ai/privacy-policy"),
            "slug": String("klusterai"),
            "status_page_url": String("https://status.klusterai.dev/"),
            "terms_of_service_url": String("https://www.kluster.ai/terms-of-use"),
        },
        Object {
            "name": String("Together"),
            "privacy_policy_url": String("https://www.together.ai/privacy"),
            "slug": String("together"),
            "status_page_url": String("https://status.together.ai/"),
            "terms_of_service_url": String("https://www.together.ai/terms-of-service"),
        },
        Object {
            "name": String("Cerebras"),
            "privacy_policy_url": String("https://www.cerebras.ai/privacy-policy"),
            "slug": String("cerebras"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.cerebras.ai/terms-of-service"),
        },
        Object {
            "name": String("Venice"),
            "privacy_policy_url": String("https://venice.ai/legal/privacy-policy"),
            "slug": String("venice"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://venice.ai/legal/tos"),
        },
        Object {
            "name": String("Morph"),
            "privacy_policy_url": String("https://morphllm.com/privacy"),
            "slug": String("morph"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Moonshot AI"),
            "privacy_policy_url": String("https://platform.moonshot.ai/docs/agreement/userprivacy"),
            "slug": String("moonshotai"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://platform.moonshot.ai/docs/agreement/modeluse"),
        },
        Object {
            "name": String("OpenAI"),
            "privacy_policy_url": String("https://openai.com/policies/privacy-policy/"),
            "slug": String("openai"),
            "status_page_url": String("https://status.openai.com/"),
            "terms_of_service_url": String("https://openai.com/policies/row-terms-of-use/"),
        },
        Object {
            "name": String("Stealth"),
            "privacy_policy_url": Null,
            "slug": String("stealth"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("AtlasCloud"),
            "privacy_policy_url": String("https://www.atlascloud.ai/privacy"),
            "slug": String("atlas-cloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Amazon Bedrock"),
            "privacy_policy_url": String("https://aws.amazon.com/privacy"),
            "slug": String("amazon-bedrock"),
            "status_page_url": String("https://health.aws.amazon.com/health/status"),
            "terms_of_service_url": String("https://aws.amazon.com/service-terms/"),
        },
        Object {
            "name": String("Groq"),
            "privacy_policy_url": String("https://groq.com/privacy-policy/"),
            "slug": String("groq"),
            "status_page_url": String("https://status.groq.com/"),
            "terms_of_service_url": String("https://groq.com/terms-of-use/"),
        },
        Object {
            "name": String("Featherless"),
            "privacy_policy_url": String("https://featherless.ai/privacy"),
            "slug": String("featherless"),
            "status_page_url": String("https://featherless.ai/status"),
            "terms_of_service_url": String("https://featherless.ai/terms"),
        },
        Object {
            "name": String("NextBit"),
            "privacy_policy_url": String("https://www.nextbit256.com/docs/privacy-policy"),
            "slug": String("nextbit"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.nextbit256.com/docs/terms-of-service"),
        },
        Object {
            "name": String("Atoma"),
            "privacy_policy_url": Null,
            "slug": String("atoma"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://atoma.network/terms_of_service"),
        },
        Object {
            "name": String("BaseTen"),
            "privacy_policy_url": String("https://www.baseten.co/privacy-policy"),
            "slug": String("baseten"),
            "status_page_url": String("https://status.baseten.co/"),
            "terms_of_service_url": String("https://www.baseten.co/terms-and-conditions"),
        },
        Object {
            "name": String("AI21"),
            "privacy_policy_url": String("https://www.ai21.com/privacy-policy/"),
            "slug": String("ai21"),
            "status_page_url": String("https://status.ai21.com/"),
            "terms_of_service_url": String("https://www.ai21.com/terms-of-service/"),
        },
        Object {
            "name": String("Minimax"),
            "privacy_policy_url": String("https://www.minimax.io/platform/protocol/privacy-policy"),
            "slug": String("minimax"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.minimax.io/platform/protocol/terms-of-service"),
        },
        Object {
            "name": String("Mistral"),
            "privacy_policy_url": String("https://mistral.ai/terms/#privacy-policy"),
            "slug": String("mistral"),
            "status_page_url": String("https://status.mistral.ai/"),
            "terms_of_service_url": String("https://mistral.ai/terms/#terms-of-use"),
        },
        Object {
            "name": String("Anthropic"),
            "privacy_policy_url": String("https://www.anthropic.com/legal/privacy"),
            "slug": String("anthropic"),
            "status_page_url": String("https://status.anthropic.com/"),
            "terms_of_service_url": String("https://www.anthropic.com/legal/commercial-terms"),
        },
        Object {
            "name": String("Lambda"),
            "privacy_policy_url": String("https://lambda.ai/legal/privacy-policy"),
            "slug": String("lambda"),
            "status_page_url": String("https://status.lambdalabs.com/"),
            "terms_of_service_url": String("https://lambda.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("Hyperbolic"),
            "privacy_policy_url": String("https://hyperbolic.xyz/privacy"),
            "slug": String("hyperbolic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://hyperbolic.xyz/terms"),
        },
        Object {
            "name": String("NCompass"),
            "privacy_policy_url": String("https://ncompass.tech/privacy"),
            "slug": String("ncompass"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://ncompass.tech/terms"),
        },
        Object {
            "name": String("Azure"),
            "privacy_policy_url": String("https://www.microsoft.com/en-us/privacy/privacystatement"),
            "slug": String("azure"),
            "status_page_url": String("https://status.azure.com/"),
            "terms_of_service_url": String("https://www.microsoft.com/en-us/legal/terms-of-use?oneroute=true"),
        },
        Object {
            "name": String("DeepSeek"),
            "privacy_policy_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Privacy%20Policy.html"),
            "slug": String("deepseek"),
            "status_page_url": String("https://status.deepseek.com/"),
            "terms_of_service_url": String("https://chat.deepseek.com/downloads/DeepSeek%20Terms%20of%20Use.html"),
        },
        Object {
            "name": String("Crusoe"),
            "privacy_policy_url": String("https://legal.crusoe.ai/open-router#cloud-privacy-policy"),
            "slug": String("crusoe"),
            "status_page_url": String("https://status.crusoecloud.com/"),
            "terms_of_service_url": String("https://legal.crusoe.ai/open-router#managed-inference-tos-open-router"),
        },
        Object {
            "name": String("Cohere"),
            "privacy_policy_url": String("https://cohere.com/privacy"),
            "slug": String("cohere"),
            "status_page_url": String("https://status.cohere.ai/"),
            "terms_of_service_url": String("https://cohere.com/terms-of-use"),
        },
        Object {
            "name": String("Google"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-vertex"),
            "status_page_url": String("https://status.cloud.google.com/products/sdXM79fz1FS6ekNpu37K/history"),
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Mancer 2"),
            "privacy_policy_url": String("https://mancer.tech/privacy"),
            "slug": String("mancer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://mancer.tech/terms"),
        },
        Object {
            "name": String("Perplexity"),
            "privacy_policy_url": String("https://www.perplexity.ai/hub/legal/privacy-policy"),
            "slug": String("perplexity"),
            "status_page_url": String("https://status.perplexity.ai/"),
            "terms_of_service_url": String("https://www.perplexity.ai/hub/legal/perplexity-api-terms-of-service"),
        },
        Object {
            "name": String("Avian"),
            "privacy_policy_url": String("https://avian.io/privacy"),
            "slug": String("avian"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://avian.io/terms"),
        },
        Object {
            "name": String("Novita"),
            "privacy_policy_url": String("https://novita.ai/legal/privacy-policy"),
            "slug": String("novita"),
            "status_page_url": String("https://status.novita.ai/"),
            "terms_of_service_url": String("https://novita.ai/legal/terms-of-service"),
        },
        Object {
            "name": String("SiliconFlow"),
            "privacy_policy_url": Null,
            "slug": String("siliconflow"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Switchpoint"),
            "privacy_policy_url": Null,
            "slug": String("switchpoint"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Fireworks"),
            "privacy_policy_url": String("https://fireworks.ai/privacy-policy"),
            "slug": String("fireworks"),
            "status_page_url": String("https://status.fireworks.ai/"),
            "terms_of_service_url": String("https://fireworks.ai/terms-of-service"),
        },
        Object {
            "name": String("Inflection"),
            "privacy_policy_url": String("https://inflection.ai/privacy-policy"),
            "slug": String("inflection"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://developers.inflection.ai/tos"),
        },
        Object {
            "name": String("xAI"),
            "privacy_policy_url": String("https://x.ai/legal/privacy-policy"),
            "slug": String("xai"),
            "status_page_url": String("https://status.x.ai/"),
            "terms_of_service_url": String("https://x.ai/legal/terms-of-service-enterprise"),
        },
        Object {
            "name": String("Google AI Studio"),
            "privacy_policy_url": String("https://cloud.google.com/terms/cloud-privacy-notice"),
            "slug": String("google-ai-studio"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://cloud.google.com/terms/"),
        },
        Object {
            "name": String("Infermatic"),
            "privacy_policy_url": String("https://infermatic.ai/privacy-policy/"),
            "slug": String("infermatic"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://infermatic.ai/terms-and-conditions/"),
        },
        Object {
            "name": String("InferenceNet"),
            "privacy_policy_url": String("https://inference.net/privacy-policy"),
            "slug": String("inference-net"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://inference.net/terms-of-service"),
        },
        Object {
            "name": String("Inception"),
            "privacy_policy_url": String("https://www.inceptionlabs.ai/terms#privacy-policy"),
            "slug": String("inception"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.inceptionlabs.ai/terms"),
        },
        Object {
            "name": String("Targon"),
            "privacy_policy_url": String("https://targon.com/privacy"),
            "slug": String("targon"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://targon.com/terms"),
        },
        Object {
            "name": String("Nebius"),
            "privacy_policy_url": String("https://docs.nebius.com/legal/studio/privacy/"),
            "slug": String("nebius"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://docs.nebius.com/legal/studio/terms-of-use/"),
        },
        Object {
            "name": String("Alibaba"),
            "privacy_policy_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-privacy-policy"),
            "slug": String("alibaba"),
            "status_page_url": String("https://status.alibabacloud.com/"),
            "terms_of_service_url": String("https://www.alibabacloud.com/help/en/legal/latest/alibaba-cloud-international-website-product-terms-of-service-v-3-8-0"),
        },
        Object {
            "name": String("Chutes"),
            "privacy_policy_url": Null,
            "slug": String("chutes"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://chutes.ai/tos"),
        },
        Object {
            "name": String("Friendli"),
            "privacy_policy_url": String("https://friendli.ai/privacypolicy"),
            "slug": String("friendli"),
            "status_page_url": String("https://status.friendli.ai/"),
            "terms_of_service_url": String("https://friendli.ai/terms-of-service"),
        },
        Object {
            "name": String("Ubicloud"),
            "privacy_policy_url": String("https://www.ubicloud.com/docs/about/privacy-policy"),
            "slug": String("ubicloud"),
            "status_page_url": String("https://status.ubicloud.com/"),
            "terms_of_service_url": String("https://www.ubicloud.com/docs/about/terms-of-service"),
        },
        Object {
            "name": String("Cloudflare"),
            "privacy_policy_url": String("https://developers.cloudflare.com/workers-ai/privacy"),
            "slug": String("cloudflare"),
            "status_page_url": String("https://www.cloudflarestatus.com/"),
            "terms_of_service_url": String("https://www.cloudflare.com/service-specific-terms-developer-platform/#developer-platform-terms"),
        },
        Object {
            "name": String("AionLabs"),
            "privacy_policy_url": String("https://www.aionlabs.ai/privacy-policy/"),
            "slug": String("aion-labs"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.aionlabs.ai/terms/"),
        },
        Object {
            "name": String("Liquid"),
            "privacy_policy_url": String("https://www.liquid.ai/privacy-policy"),
            "slug": String("liquid"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.liquid.ai/terms-conditions"),
        },
        Object {
            "name": String("DeepInfra"),
            "privacy_policy_url": String("https://deepinfra.com/privacy"),
            "slug": String("deepinfra"),
            "status_page_url": String("https://status.deepinfra.com/"),
            "terms_of_service_url": String("https://deepinfra.com/terms"),
        },
        Object {
            "name": String("Nineteen"),
            "privacy_policy_url": Null,
            "slug": String("nineteen"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://nineteen.ai/tos"),
        },
        Object {
            "name": String("Enfer"),
            "privacy_policy_url": String("https://enfer.ai/privacy-policy"),
            "slug": String("enfer"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://enfer.ai/privacy-policy"),
        },
        Object {
            "name": String("CrofAI"),
            "privacy_policy_url": String("https://ai.nahcrof.com/privacy"),
            "slug": String("crofai"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
        Object {
            "name": String("Phala"),
            "privacy_policy_url": String("https://red-pill.ai/privacy"),
            "slug": String("phala"),
            "status_page_url": String("https://status.phala.network/"),
            "terms_of_service_url": String("https://red-pill.ai/terms"),
        },
        Object {
            "name": String("OpenInference"),
            "privacy_policy_url": String("https://www.openinference.xyz/terms"),
            "slug": String("open-inference"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.openinference.xyz/terms"),
        },
        Object {
            "name": String("Meta"),
            "privacy_policy_url": String("https://www.facebook.com/privacy/policy/"),
            "slug": String("meta"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://llama.developer.meta.com/legal/terms-of-service"),
        },
        Object {
            "name": String("Parasail"),
            "privacy_policy_url": String("https://www.parasail.io/legal/privacy-policy"),
            "slug": String("parasail"),
            "status_page_url": Null,
            "terms_of_service_url": String("https://www.parasail.io/legal/terms"),
        },
        Object {
            "name": String("GMICloud"),
            "privacy_policy_url": String("https://docs.gmicloud.ai/privacy"),
            "slug": String("gmicloud"),
            "status_page_url": Null,
            "terms_of_service_url": Null,
        },
    ],
}

    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:396 on ThreadId(2)

  2025-08-28T01:36:39.493538Z  INFO e2e_openrouter_tools_app: model: x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:39.628216Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping x-ai/grok-code-fast-1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:36:39.628262Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:39.824369Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-70b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:36:39.824448Z  INFO e2e_openrouter_tools_app: model: nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:39.961691Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping nousresearch/hermes-4-405b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:36:39.961744Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:40.317519Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview:free: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:36:40.317583Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview:free | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:36:40.317592Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview:free
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:36:40.317600Z  INFO e2e_openrouter_tools_app: model: google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:40.459786Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for google/gemini-2.5-flash-image-preview: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:36:40.459822Z  WARN e2e_openrouter_tools_app: google/gemini-2.5-flash-image-preview | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:36:40.459833Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping google/gemini-2.5-flash-image-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:36:40.459839Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:40.633133Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-chat-v3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:36:40.633163Z  INFO e2e_openrouter_tools_app: model: deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:40.768978Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for deepseek/deepseek-v3.1-base: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:36:40.769006Z  WARN e2e_openrouter_tools_app: deepseek/deepseek-v3.1-base | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:36:40.769012Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping deepseek/deepseek-v3.1-base
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:36:40.769018Z  INFO e2e_openrouter_tools_app: model: openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:36:41.211548Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for openai/gpt-4o-audio-preview: OpenAI | openai/gpt-4o-audio-preview
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:36:41.211742Z  INFO ploke_tui::event_bus: close, time.busy: 17.3µs, time.idle: 4.52µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 566b4b18-57b4-49e4-94f1-3f22d74b464d, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:36:41.211790Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 88.8µs, time.idle: 18.3µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 566b4b18-57b4-49e4-94f1-3f22d74b464d, content: "Switched active model to openai/gpt-4o-audio-preview via provider openai---openai-gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:36:41.211812Z  INFO ploke_tui::event_bus: close, time.busy: 7.21µs, time.idle: 2.13µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:36:41.212985Z  INFO ploke_tui::event_bus: close, time.busy: 5.41µs, time.idle: 2.67µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: b765db2f-8d53-4b32-a6a9-f1213d4eadf4, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:36:41.213016Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 44.9µs, time.idle: 9.37µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: b765db2f-8d53-4b32-a6a9-f1213d4eadf4, content: "model changed from moonshotai/kimi-k2 to openai/gpt-4o-audio-preview", kind: SysInfo

  2025-08-28T01:36:41.312750Z  INFO ploke_tui::event_bus: close, time.busy: 10.6µs, time.idle: 7.79µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:36:41.312812Z  INFO ploke_tui::event_bus: close, time.busy: 7.42µs, time.idle: 10.2µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:36:41.312884Z  INFO ploke_tui::llm: Received LLM request for parent_id: 8ed2f4ad-bb20-4799-a7ba-40aaac91b7e3
new_msg_id: ece402f0-c21b-496c-b506-1a75f01bf583
    at crates/ploke-tui/src/llm/mod.rs:279 on ThreadId(2)

  2025-08-28T01:36:41.312900Z  INFO ploke_tui::llm: Received context for parent_id: 8ed2f4ad-bb20-4799-a7ba-40aaac91b7e3
    at crates/ploke-tui/src/llm/mod.rs:290 on ThreadId(2)

  2025-08-28T01:36:41.312918Z  INFO ploke_tui::llm: pending_requests found match for req_parent: 8ed2f4ad-bb20-4799-a7ba-40aaac91b7e3
    at crates/ploke-tui/src/llm/mod.rs:312 on ThreadId(2)

  2025-08-28T01:36:41.312926Z  INFO ploke_tui::llm: ready_contexts found match for req_parent: 8ed2f4ad-bb20-4799-a7ba-40aaac91b7e3
    at crates/ploke-tui/src/llm/mod.rs:317 on ThreadId(2)

  2025-08-28T01:36:41.312941Z  INFO ploke_tui::llm: removing id from pending_requests
    at crates/ploke-tui/src/llm/mod.rs:330 on ThreadId(2)

  2025-08-28T01:36:41.313000Z ERROR ploke_tui::llm: Failed to create assistant message: state_manager dropped responder.
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/llm/mod.rs:520 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with model: openai/gpt-4o-audio-preview

  2025-08-28T01:36:41.313021Z  INFO ploke_tui::llm: close, time.busy: 39.5µs, time.idle: 19.5µs
    at crates/ploke-tui/src/llm/mod.rs:479 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with model: openai/gpt-4o-audio-preview

  2025-08-28T01:37:01.355263Z  INFO e2e_openrouter_tools_app: model: mistralai/mistral-medium-3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:37:01.504225Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for mistralai/mistral-medium-3.1: Mistral | mistralai/mistral-medium-3.1
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:37:01.504454Z  INFO ploke_tui::event_bus: close, time.busy: 15.5µs, time.idle: 4.80µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 69f9f3e5-6da2-4828-a6d4-9132dcf14c6c, content: "Switched active model to mistralai/mistral-medium-3.1 via provider mistral---mistralai-mistral-medium-3-1", kind: SysInfo

  2025-08-28T01:37:01.504511Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 103µs, time.idle: 22.1µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 69f9f3e5-6da2-4828-a6d4-9132dcf14c6c, content: "Switched active model to mistralai/mistral-medium-3.1 via provider mistral---mistralai-mistral-medium-3-1", kind: SysInfo

  2025-08-28T01:37:01.504528Z  INFO ploke_tui::event_bus: close, time.busy: 1.74µs, time.idle: 1.88µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:37:01.505944Z  INFO ploke_tui::event_bus: close, time.busy: 5.53µs, time.idle: 2.63µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 7c025e2b-b109-4588-aef4-37ace93fb432, content: "model changed from openai/gpt-4o-audio-preview to mistralai/mistral-medium-3.1", kind: SysInfo

  2025-08-28T01:37:01.505975Z  INFO ploke_tui::app_state::handlers::chat: close, time.busy: 45.8µs, time.idle: 8.81µs
    at crates/ploke-tui/src/app_state/handlers/chat.rs:146 on ThreadId(2)
    in ploke_tui::app_state::handlers::chat::add_msg_immediate with event_bus: EventBus { realtime_tx: broadcast::Sender, background_tx: broadcast::Sender, error_tx: broadcast::Sender, index_tx: broadcast::Sender }, new_msg_id: 7c025e2b-b109-4588-aef4-37ace93fb432, content: "model changed from openai/gpt-4o-audio-preview to mistralai/mistral-medium-3.1", kind: SysInfo

  2025-08-28T01:37:01.604970Z  INFO ploke_tui::event_bus: close, time.busy: 19.0µs, time.idle: 14.8µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:37:01.605094Z  INFO ploke_tui::event_bus: close, time.busy: 13.5µs, time.idle: 15.8µs
    at crates/ploke-tui/src/event_bus/mod.rs:195 on ThreadId(2)
    in ploke_tui::event_bus::send

  2025-08-28T01:37:01.605202Z  INFO ploke_tui::llm: Received LLM request for parent_id: a4dd271d-7c8d-4235-9baa-199bd0d893ce
new_msg_id: 45eb9a6d-2817-43b6-95cb-c477bd5697a3
    at crates/ploke-tui/src/llm/mod.rs:279 on ThreadId(2)

  2025-08-28T01:37:01.605231Z  INFO ploke_tui::llm: Received context for parent_id: a4dd271d-7c8d-4235-9baa-199bd0d893ce
    at crates/ploke-tui/src/llm/mod.rs:290 on ThreadId(2)

  2025-08-28T01:37:01.605257Z  INFO ploke_tui::llm: pending_requests found match for req_parent: a4dd271d-7c8d-4235-9baa-199bd0d893ce
    at crates/ploke-tui/src/llm/mod.rs:312 on ThreadId(2)

  2025-08-28T01:37:01.605269Z  INFO ploke_tui::llm: ready_contexts found match for req_parent: a4dd271d-7c8d-4235-9baa-199bd0d893ce
    at crates/ploke-tui/src/llm/mod.rs:317 on ThreadId(2)

  2025-08-28T01:37:01.605298Z  INFO ploke_tui::llm: removing id from pending_requests
    at crates/ploke-tui/src/llm/mod.rs:330 on ThreadId(2)

  2025-08-28T01:37:01.605380Z ERROR ploke_tui::llm: Failed to create assistant message: state_manager dropped responder.
    at /home/brasides/code/openai-codex/ploke/crates/ploke-tui/src/llm/mod.rs:520 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with model: mistralai/mistral-medium-3.1

  2025-08-28T01:37:01.605401Z  INFO ploke_tui::llm: close, time.busy: 47.4µs, time.idle: 30.2µs
    at crates/ploke-tui/src/llm/mod.rs:479 on ThreadId(2)
    in ploke_tui::llm::process_llm_request with model: mistralai/mistral-medium-3.1

  2025-08-28T01:37:21.649101Z  INFO e2e_openrouter_tools_app: model: baidu/ernie-4.5-21b-a3b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:421 on ThreadId(2)

  2025-08-28T01:37:21.843358Z  INFO e2e_openrouter_tools_app: tools-capable endpoints cached for baidu/ernie-4.5-21b-a3b: 
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:188 on ThreadId(2)

  2025-08-28T01:37:21.843397Z  WARN e2e_openrouter_tools_app: baidu/ernie-4.5-21b-a3b | No candidates found for model with tools
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:199 on ThreadId(2)

  2025-08-28T01:37:21.843407Z  INFO e2e_openrouter_tools_app:   no tools-capable endpoints; skipping baidu/ernie-4.5-21b-a3b
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:432 on ThreadId(2)

  2025-08-28T01:37:21.843647Z  INFO e2e_openrouter_tools_app: Summary: total_outcomes=4 successes=0 no_tool_calls=4 http_404_first_leg=0 http_429_any_leg=0
    at crates/ploke-tui/tests/e2e_openrouter_tools_app.rs:595 on ThreadId(2)

