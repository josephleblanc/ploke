# 0005 â€“ Tracing instrumentation and PrioritizedServer enum

Decisions
- Add lightweight observability via tracing to key manager operations (ensure_started, spawn_service, call_tool, list_tools, cancel, cancel_all, start_autostart).
- Introduce PrioritizedServer enum to capture well-known servers and their default priorities, matching PLAN.md guidance.

Changes Summary
- Cargo.toml: add dependency on tracing with attributes macro.
- manager.rs: annotate functions with #[instrument], add debug/info/warn logs around process launch, tool calls, and cancellations.
- types.rs: add PrioritizedServer with helpers id() and default_priority(); re-export from lib.rs.

Rationale
- Spans and structured logs aid debugging across process boundaries and will integrate with future subscriber setup.
- PrioritizedServer formalizes defaults and improves ergonomics for code that needs to reference canonical server IDs.

Next Steps
- Wire up a tracing subscriber in binaries/tests where appropriate; consider env-based default.
- Optional: surface per-call and per-server timeouts in config; include in spans as fields.
- Add E2E test helpers that log spans during autostart and a basic tool invocation.

Suggested PLAN.md Edits
- Note that observability is now partially implemented with tracing spans; document recommended subscriber setup.
