# 0006 â€“ Per-server timeouts + tracing helper

Decisions
- Add optional per-server default timeout (ms) to ServerSpec and TOML ([servers.<id>].default_timeout_ms).
- Use the configured timeout in McpManager::call_tool; default to 30_000 ms otherwise.
- Provide util::init_tracing_once() for opt-in tracing in tests/examples without forcing global subscribers.

Changes Summary
- config.rs: ServerSpec gains default_timeout_ms: Option<u64>; RawServer mirrors it; from_toml_str wires it; preserves sort by priority.
- manager.rs: call_tool now reads timeout from config and uses Duration::from_millis.
- lib.rs: expose util module; re-export init_tracing_once.
- Cargo.toml (crate): add tracing-subscriber via workspace.
- util.rs: new module implementing init_tracing_once.

Rationale
- Different MCP servers/tools have varied latency; per-server defaults give predictable behavior via config.
- Tracing helper keeps the library side-effect free while enabling observability when desired.

Next Steps
- Optional API: call_tool_with_timeout for per-invocation overrides.
- Docs: extend PLAN.md Config Design with default_timeout_ms and show example TOML.
- Tests: unit test config parsing for default_timeout_ms; e2e remains gated by PLOKE_E2E_MCP.

Suggested PLAN.md Edits
- Under Config Design, add: default_timeout_ms (u64, milliseconds) on servers; used as default call timeout.
- Under Observability, mention util::init_tracing_once for tests/examples.
