# 0002 â€“ Fix doctest failures by marking E2E examples as non-compiling

Decisions
- The doc examples in `context7_client.rs` use async `.await`, external processes, and missing imports, which break rustdoc doctest compilation.
- Marked long E2E examples and non-Rust snippets as non-compiling via `rust,ignore` or `text` fences.

Changes Summary
- Updated code fences in `src/context7_client.rs`:
  - Changed ```rust,test to ```rust,ignore for the async E2E example.
  - Changed ambiguous ``` to ```text for non-Rust outputs and tool schemas.
  - Changed another Rust snippet that depends on external crates (bevy) to ```text.

Rationale
- Doctests compile each snippet in isolation; without trait imports and async context they fail.
- We keep syntax highlighting where helpful but prevent compilation of external-dependent examples.

Next Steps
- Add concise, self-contained doctest snippets that compile (unit-focused).
- Consider a crate-level policy: use `no_run` for simple examples that still compile, `ignore` or `text` for E2E.
- Implement `McpManager::list_tools` and add minimal unit tests.

Suggested PLAN.md Edits
- Add a short "Docs/Doctest policy" section recommending `rust,ignore` for E2E examples involving external MCP servers.
