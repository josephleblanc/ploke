# 0001 â€“ Initial trait facade and Git client expansion

Decisions
- Adopted async traits (via async-trait) for backend-agnostic facades: GitOps and DocsLookup.
- Kept rmcp details encapsulated in McpManager and typed clients; no API surface changes to manager.
- Extended GitClient with core operations (diff, add, commit, checkout, branch) mapped to mcp-server-git tools.
- Deferred list_tools() mapping to ToolDescriptor until we stabilize rmcp tool schema handling.

Changes Summary
- Cargo.toml: added async-trait = "0.1".
- types.rs: introduced GitOps and DocsLookup async traits; no breaking changes to existing types.
- clients/git.rs: added diff/add/commit/checkout/branch; implemented GitOps for GitClient.
- clients/context7.rs: implemented DocsLookup for Context7Client.
- lib.rs: re-exported GitOps and DocsLookup traits for external use.

Rationale
- Traits enable seamless future swap to a native backend without changing consumers.
- Incrementally growing typed Git API aligns with PLAN.md milestones (M1/M4) while keeping footprint small.

Next Steps
- Implement McpManager::list_tools() returning Vec<ToolDescriptor> with resilient mapping.
- Add config loader (TOML) and autostart prioritized servers (M2).
- Introduce timeouts and basic tracing spans around tool calls.
- Add integration tests gated by PLOKE_E2E_MCP=1 for new Git methods.

Suggested PLAN.md Edits
- Clarify expected tool names for mcp-server-git (e.g., "git_diff", "git_add", etc.) to ensure consistent client mapping.
- Note the use of async-trait for async traits in v0 API surface.
